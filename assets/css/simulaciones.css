/* ===== Sección SIMULACIONES (fondo degradado con haz naranja) ===== */
.sims-section{
  position: relative;
  padding: 60px 20px;
  background:
    radial-gradient(1200px 400px at 10% -10%, rgba(255,140,0,.20), transparent 60%),
    linear-gradient(180deg, #121212, #1a1a1a);
  color: #f3f3f3;
  overflow: hidden;
}
.sims-section::before{
  content:""; position:absolute; inset:-10% -20%;
  background: conic-gradient(from 210deg, rgba(255,140,0,.18), transparent 40% 60%, rgba(255,140,0,.12));
  filter: blur(50px);
  pointer-events:none;
}
.sims-inner{ max-width: 1200px; margin: 0 auto; }
.sims-inner h2{ margin: 0 0 20px; font-size: clamp(1.6rem, 2.2vw, 2.2rem); }
.sims-grid{
  display:grid; grid-template-columns: repeat(auto-fit, minmax(280px,1fr));
  gap: 20px;
}
.sim-card{
  background: #1f1f1f; border: 1px solid #2a2a2a; border-radius: 16px;
  box-shadow: 0 0 24px rgba(0,0,0,.25), inset 0 0 0 1px rgba(255,255,255,.03);
  padding: 18px;
}
.sim-card__title{ margin: 0 0 6px; font-size: 1.1rem; }
.sim-card__desc{ margin: 0 0 14px; color:#cfcfcf; font-size:.95rem; }
.btn-sim{
  display:inline-block; border:1px solid #ffa34d; background: linear-gradient(180deg,#ffb466,#f7981d);
  color:#1b1103; font-weight:700; padding:10px 14px; border-radius: 10px; cursor:pointer;
}
.btn-sim:hover{ filter: brightness(1.03); }

/* ===== Modal genérico a pantalla completa ===== */
.screen-modal{ position: fixed; inset: 0; display:none; z-index: 9000; }
.screen-modal[aria-hidden="false"]{ display:block; }
.screen-modal__backdrop{
  position:absolute; inset:0; background: rgba(0,0,0,.7); backdrop-filter: blur(4px);
}
.screen-modal__panel{
  position: relative; z-index: 1; margin: 4vh auto 2vh; max-width: 1200px;
  background: #161616; color:#e9e9e9; border:1px solid #393939; border-radius: 14px;
  box-shadow: 0 0 40px rgba(255,140,0,.15), 0 0 40px rgba(0,255,140,.12);
  padding: 20px;
  height: 92vh; overflow: auto;
}
.screen-modal__title{ margin: 0 0 14px; }
.screen-modal__close{
  position:absolute; top:10px; right:12px; border:0; background:transparent; color:#fff;
  font-size: 2rem; cursor:pointer; line-height:1; z-index: 1000;
}
.screen-modal__placeholder{
  display:grid; place-items:center; min-height: 60vh; color:#cfcfcf; opacity:.9;
}

/* ====== CSS de la TIENDA (copiado del original) ====== */
/* Contenedor y cabecera */
.online-store-container{
  background:#1e1e1e; padding:30px; border-radius: var(--border-radius,16px); margin:20px 0;
}
.store-header{ display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #444; padding-bottom:15px; margin-bottom:30px; }
.store-header h3{ color:#fff; margin:0; border:none; padding:0; }
.store-header .books-icon{ color:#fff; }

/* Rejilla 3 col responsive */
.store-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(320px,1fr)); gap:30px; }
.store-grid.store-grid--3{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
@media (max-width:1100px){ .store-grid.store-grid--3{ grid-template-columns: repeat(2, minmax(0,1fr)); } }
@media (max-width:680px){ .store-grid.store-grid--3{ grid-template-columns: 1fr; } }

/* Cards */
.product-card{
  background:#2c2c2c; border-radius: var(--border-radius,16px); overflow:hidden; border:1px solid #444;
  box-shadow:0 0 15px rgba(0,0,0,.4); transition: transform .3s ease, box-shadow .3s ease; cursor:pointer;
}
.product-card:hover{ transform: translateY(-8px); box-shadow:0 0 30px rgba(0,255,140,.4); }
.card-cover{ position:relative; }
.card-cover img{ width:100%; display:block; }
.card-pricing-overlay{
  position:absolute; inset:0; background: rgba(0,0,0,.7); color:#fff; padding:15px;
  display:flex; flex-direction:column; justify-content:center; text-align:center; opacity:0; transition: opacity .3s ease;
}
.product-card:hover .card-pricing-overlay{ opacity:1; }
.card-info{ padding:20px; }
.card-info h4{ margin:0 0 10px; color:#fff; display:flex; align-items:center; gap:8px; }
.card-info p.description{ font-size:.9em; color:#b0b0b0; line-height:1.6; margin-bottom:15px; }
.card-tags{ display:flex; flex-wrap:wrap; gap:8px; margin-bottom:15px; }
.card-tags span{ font-size:.75em; padding:4px 10px; border-radius: 15px; background:#82dd77; color: #2f2d2d; }
.card-stats{ display:grid; gap:10px; font-size:.9em; }
.stat-item{ display:flex; justify-content:space-between; align-items:center; color:#00ff8c !important; }
.progress-bar{ background:#555; height:8px; width:100px; border-radius:4px; }
.progress-bar div{ height:100%; background: #72ed71; border-radius: 4px; }

/* NOTA: El CSS del #product-lightbox ya lo pegas con su bloque original. */
/* ====================================================================
   ESTILOS PARA EL SIMULACRO DE TIENDA ONLINE Y FICHA DE PRODUCTO
   ==================================================================== */

/* --- Contenedor Principal de la Tienda --- */
.online-store-container {
    background: #1e1e1e; /* Fondo oscuro para la sección */
    padding: 30px;
    border-radius: var(--border-radius);
    margin: 20px 0;
}
.store-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #444;
    padding-bottom: 15px;
    margin-bottom: 30px;
}
.store-header h3 { color: #fff; margin: 0; border: none; padding: 0; }
.store-header .books-icon { color: #fff; }

/* --- Rejilla de Fichas de Producto --- */
.store-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 30px;
}
/* Forzar 3 columnas en desktop para la tienda de Libros */
.store-grid.store-grid--3 {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 30px; /* mantiene tu separación actual */
}

/* Bajamos a 2 columnas en pantallas medianas */
@media (max-width: 1100px) {
  .store-grid.store-grid--3 {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

/* 1 columna en móvil */
@media (max-width: 680px) {
  .store-grid.store-grid--3 {
    grid-template-columns: 1fr;
  }
}

.product-card {
    background: #2c2c2c;
    border-radius: var(--border-radius);
    overflow: hidden;
    border: 1px solid #444;
    box-shadow: 0 0 15px rgba(0,0,0,0.4);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
}
.product-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 0 30px rgba(0, 255, 140, 0.4);
}
.card-cover { position: relative; }
.card-cover img { width: 100%; display: block; }
.card-pricing-overlay {
    position: absolute; top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.7);
    color: white; padding: 15px;
    display: flex; flex-direction: column; justify-content: center;
    text-align: center;
    opacity: 0; transition: opacity 0.3s ease;
}
.product-card:hover .card-pricing-overlay { opacity: 1; }
.card-pricing-overlay h4 { margin: 0 0 10px 0; }
.card-pricing-overlay .tier { font-size: 0.9em; border-top: 1px solid #666; padding-top: 8px; margin-top: 8px; }

.card-info { padding: 20px; }
.card-info h4 { margin: 0 0 10px 0; color: #fff; display: flex; align-items: center; gap: 8px; }
.card-info p.description { font-size: 0.9em; color: #b0b0b0; line-height: 1.6; margin-bottom: 15px; }
.card-tags { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 15px; }
.card-tags span { font-size: 0.75em; padding: 4px 10px; border-radius: 15px; background-color: #82dd77; }
.card-stats { display: grid; gap: 10px; font-size: 0.9em; }
.stat-item { display: flex; justify-content: space-between; align-items: center; color: #00ff8c !important;}
.card-stats span { color: #00ff8 !important; }
.progress-bar { background: #555; height: 8px; width: 100px; border-radius: 4px; }
.progress-bar div { height: 100%; background: var(--sidebar-accent-color); border-radius: 4px; }

/* ===== POP FICHA NOVELA: Layout final y estilos modernos (v2) ===== */
#product-lightbox { position: fixed; inset: 0; background: rgba(0,0,0,.85);
  backdrop-filter: blur(8px); display:flex; align-items:center; justify-content:center;
  opacity:0; visibility:hidden; transition:opacity .3s, visibility .3s; z-index:10000; }
#product-lightbox.active { opacity:1; visibility:visible; }

#product-lightbox .lightbox-container{
  position:relative; width:min(95vw,1100px); height:min(90vh,860px);
  background:#212121; color:#e0e0e0; border:1px solid #555; border-radius:14px;
  box-shadow:0 0 50px rgba(255,140,0,.18), 0 0 50px rgba(0,255,140,.18);
  display:grid; grid-template-rows:auto 1fr; overflow:hidden;
  transform:scale(.96); transition:transform .3s ease;
}
#product-lightbox.active .lightbox-container{ transform:scale(1); }

#product-lightbox .lightbox-close{
  position:absolute; top:14px; right:18px; background:none; border:0; color:#fff;
  font-size:2rem; cursor:pointer; z-index:5; line-height:1; }

/* ===== HEADER ===== */
#product-lightbox .lightbox-header{
  display:grid; 

  gap:10px; 
  align-items:start;
  padding:5px 30px; 
  background:#0c97435e; 
  border-bottom:1px solid #444; text-align:left;
}

/* Izquierda del header: imagen grande + título/frase a la derecha */
#product-lightbox .cover-and-title{
  display:grid; grid-template-columns:120px 1fr; gap:16px; align-items:center; align-items: start;
}
#product-lightbox .book-mark{
  width:110px; height:auto; display:block; border-radius:12px;
  box-shadow:0 10px 28px rgba(0,0,0,.35);
}
#product-lightbox .title-wrap h3{
  font-size:2rem; color:#fff;
  margin-top: 10px;
}
#product-lightbox .title-wrap p{ margin:0; color:#cfcfcf; }

/* Derecha del header: Ampliaciones + Prestaciones, apilados */
#product-lightbox .header-stats{
  display:grid; grid-template-columns:1fr; gap:12px; align-content:start;
}
#product-lightbox .header-stats h6{
  margin:0 0 8px 0; font-size:.85rem; letter-spacing:.02em; text-transform:uppercase;
  color:#dfe; opacity:.9;
}
#product-lightbox .chips{
  display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:8px;
}
#product-lightbox .chip{
  display:inline-flex; align-items:center; gap:8px; padding:8px 10px;
  border-radius:12px; font-size:.95rem; white-space:nowrap;
  border:1px solid rgba(255,255,255,.14);
  background:#1f1f1f;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.04);
}
#product-lightbox .chip i{ font-size:.95rem; }

/* Colores modernos de chips */
#product-lightbox .chip-green{
  background: linear-gradient(180deg, rgba(0,255,153,.18), rgba(0,180,120,.12));
  border-color: rgba(0,200,135,.45); color:#dfffee;
}
#product-lightbox .chip-purple{
  background: linear-gradient(180deg, rgba(160,120,255,.20), rgba(120,80,220,.12));
  border-color: rgba(140,100,240,.45); color:#efe8ff;
}
#product-lightbox .chip-cyan{
  background: linear-gradient(180deg, rgba(80,200,255,.20), rgba(40,160,220,.12));
  border-color: rgba(70,180,240,.45); color:#e7f6ff;
}
#product-lightbox .chip-orange{
  background: linear-gradient(180deg, rgba(255,160,70,.22), rgba(220,120,40,.12));
  border-color: rgba(255,150,60,.5); color:#fff3e6;
}

/* ===== BODY ===== */
#product-lightbox .lightbox-body{ min-height:0; overflow:auto; padding:200px 30px 28px; text-align:left; }

/* Grid superior: izquierda texto (sinopsis/relatos) + derecha video 9:16 */
#product-lightbox .body-top-grid{
  display:grid; grid-template-columns:1.1fr .9fr; gap:22px; align-items:start; margin-bottom:16px;
}
#product-lightbox .body-top-grid .left-col > .section-card + .section-card{ margin-top:16px; }

/* Vídeo 9:16 (derecha) */
#product-lightbox .book-trailer.vertical{
  margin:0 auto; width:min(360px,100%); aspect-ratio:9/16;
  border-radius:14px; overflow:hidden; background:#000;
  box-shadow:0 10px 28px rgba(0,0,0,.45), 0 0 24px rgba(0,0,0,.25);
}
#product-lightbox .book-trailer.vertical video{ width:100%; height:100%; display:block; object-fit:cover; }

/* Tarjetas-sección con glow más visible */
#product-lightbox .section-card{
  border:1px dashed rgba(200,200,200,.35);
  border-radius:16px; padding:18px 18px 16px; margin-bottom:16px;
  background:
    radial-gradient(1000px 240px at 0% 0%, rgba(0, 255, 160, .10), transparent 65%),
    linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.00));
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.05), 0 0 28px rgba(0,255,180,.10);
}
#product-lightbox .h-modern{
  position:relative; margin:0 0 12px; font-size:1.1rem; color:#fff; padding:8px 12px;
  border-radius:10px;
  background: linear-gradient(90deg, rgba(0,255,160,.22), rgba(0,180,120,.10) 60%, rgba(0,0,0,0));
  border:1px solid rgba(0,255,160,.25);
  text-shadow:0 0 8px rgba(0,255,160,.25);
}

/* ===== PROTAGONISTAS ===== */
#product-lightbox .characters-grid{ display:grid; gap:18px; }
@media (min-width: 980px){ #product-lightbox .characters-grid{ grid-template-columns:1fr 1fr; } }

#product-lightbox .character-card{
  position:relative; min-height: 500px; border-radius:18px; overflow:hidden;
  background: #111 top center/cover no-repeat; background-image: var(--bg);
  box-shadow:0 8px 26px rgba(0,0,0,.48), inset 0 0 0 1px rgba(255,255,255,.06),
             0 0 0 0 rgba(255,140,0,.0);
  transition: transform .18s ease, box-shadow .25s ease, border-color .25s ease, filter .25s ease;
}
#product-lightbox .character-card:hover{
  transform: translateY(-2px);
  box-shadow:0 12px 34px rgba(0,0,0,.55), 0 0 28px rgba(255,140,0,.35);
  filter: saturate(1.08);
}
#product-lightbox .character-card .labels{
  position:absolute; top:12px; left:12px; display:flex; gap:8px; z-index:2;
}
#product-lightbox .tag{
  padding:6px 12px; font-size:.82rem; border-radius:999px;
  background:rgb(4 58 255 / 38%); border:1px solid rgba(255,255,255,.28);
  backdrop-filter: blur(2px); color:#f4f4f4;
}
#product-lightbox .tag.ghost{
  background:linear-gradient(180deg, rgb(255 255 255 / 51%), rgb(255 226 0 / 56%));
  color:#111; border-color:rgba(255,255,255,.6);
}
#product-lightbox .tag.danger{
  background:linear-gradient(180deg, rgba(255,90,70,.50), rgba(180,30,20,.35));
  border-color:rgba(255,110,90,.8); color:#fff1ee;
}
#product-lightbox .tag.neutral{
  background:linear-gradient(180deg, rgba(110,150,255,.45), rgba(70,100,230,.30));
  border-color:rgba(110,150,255,.75); color:#eef2ff;
}

#product-lightbox .character-card .overlay{
  position:absolute; inset:0; display:flex; align-items:flex-end;
  background: linear-gradient(180deg, rgba(0,0,0,0) 36%, rgba(0,0,0,.68) 100%);
}
#product-lightbox .character-card .content{
  padding:18px; color:#f1f1f1; width:100%;
  background: linear-gradient(180deg, rgba(0,0,0,.0), rgba(0,0,0,.35));
  backdrop-filter: blur(2px);
}
#product-lightbox .character-card h5{ margin:0 0 8px; font-size:1.2rem; }

/* Bullets con “arte” */
#product-lightbox .character-card .bullets{ margin:10px 0 0 0; padding:0; list-style:none; }
#product-lightbox .character-card .bullets li{
  position:relative; padding-left:18px; margin:6px 0;
}
#product-lightbox .character-card .bullets li::before{
  content:""; position:absolute; left:0; top:.55em;
  width:9px; height:9px; border-radius:50%;
  background: radial-gradient(circle at 30% 30%, #fff 0, #ffd9b3 30%, #ff8a00 70%, #aa4e00 100%);
  box-shadow:0 0 8px rgba(255,138,0,.6);
}

/* CTAs */
#product-lightbox .cta-row{
  display:flex; flex-wrap:wrap; gap:12px; justify-content:center; margin-top:18px;
}
#product-lightbox .btn{
  display:inline-flex; align-items:center; gap:8px; padding:10px 16px; font-weight:600;
  border-radius:12px; cursor:pointer; border:1px solid #3a3a3a; background:#1c1c1c; color:#eaeaea;
  transition: transform .06s ease, box-shadow .2s ease, border-color .2s ease;
}
#product-lightbox .btn:hover{ transform: translateY(-1px); box-shadow:0 8px 24px rgba(0,0,0,.25); border-color:#5a5a5a; }
#product-lightbox .btn.primary{ background:linear-gradient(180deg, #00ff99, #00d27a); color:#0b1c14; border-color:#00d27a; }
#product-lightbox .btn.ghost{ background:#262626; }
#product-lightbox .btn.outline{ background:transparent; border-color:#6a6a6a; }
#product-lightbox .btn i{ font-size:1rem; }

/* Responsive header/body */
@media (max-width: 1024px){
  #product-lightbox .lightbox-header{ grid-template-columns:1fr; }
}
@media (max-width: 720px){
  #product-lightbox .cover-and-title{ grid-template-columns:90px 1fr; }
  #product-lightbox .book-mark{ width:88px; }
}
@media (max-width: 980px){
  #product-lightbox .body-top-grid{ grid-template-columns:1fr; }
  #product-lightbox .book-trailer.vertical{ margin-top:8px; }
}
@media (max-width: 520px){
  #product-lightbox .chips{ grid-template-columns:1fr; }
}

/* ===================================
   ESTILOS PARA SIMULACIÓN DE PERSONAJES  GOOGLE
   =================================== */

/* --- Contenedor Principal (Escenario) --- */
.character-selection-stage {
    width: 100%;
    height: 100%;
    background-image: url('../img/fondo-eleccion-personajes.jpg');
    background-size: cover;
    background-position: center;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 2rem;
    position: relative;
    overflow: hidden;
    box-sizing: border-box;
}

.close-modal-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    background: rgba(0, 0, 0, 0.5);
    color: white;
    border: 1px solid white;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    font-size: 24px;
    line-height: 38px;
    text-align: center;
    cursor: pointer;
    z-index: 100;
}

/* --- Layout General (Grid) --- */
.selection-container {
    display: grid;
    grid-template-columns: 320px minmax(400px, 500px) 320px;
    align-items: center;
    gap: 1.5rem;
    width: 100%;
    max-width: 1240px;
    height: 100%;
}

/* --- Columnas de Información --- */
.info-column {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    height: 100%;
    justify-content: center;
}

.info-card {
    background: rgb(10 25 40 / 18%);
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    padding: 1rem;
    color: #f0f0f0;
	/* ▼▼▼ AÑADE ESTA LÍNEA ▼▼▼ */
    box-shadow: 0 0 15px rgba(0, 242, 195, 0.8); /* Glow: sin offset, 15px de blur, color verde-cian al 40% de opacidad */
    
    /* (Opcional) Añade una transición para futuras animaciones */
    transition: box-shadow 0.3s ease-in-out;
}

.info-card-title {
    margin-top: 0;
    margin-bottom: 1rem;
    color: #4de190; /* Un color cian para acentuar */
    font-size: 1.1rem;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.genres-chips {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

/* ===================================
   ESTILOS MODERNOS PARA CHIPS DE GÉNERO
   =================================== */

/* --- 1. Estilo Base Moderno para TODOS los chips --- */
.genres-chips .chip {
    /* Diseño y tipografía */
    padding: 0.4em 0.9em; /* Padding más equilibrado */
    font-size: 0.85rem;
    font-weight: 600; /* Semi-bold */
    color: #1a1a1a; /* Un negro más suave que el puro */
    border-radius: 20px;
    border: 1px solid rgba(255, 255, 255, 0.2); /* Borde sutil */
    text-shadow: none; /* Quitamos cualquier sombra de texto anterior */

    /* Efecto de brillo sutil */
    box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.4), 
                0 2px 4px rgba(0, 0, 0, 0.2);

    /* Animación suave para el hover */
    transition: transform 0.2s ease-out, filter 0.2s ease-out;
}

/* --- 2. Paleta de Colores por Posición --- */
/* Estilo para el PRIMER chip de la lista */
.genres-chips .chip:nth-child(1) {
    background-image: linear-gradient(160deg, #f068ff, #a93df5); /* Gradiente Púrpura/Magenta */
}

/* Estilo para el SEGUNDO chip de la lista */
.genres-chips .chip:nth-child(2) {
    background-image: linear-gradient(160deg, #ffd34f, #ff8f00); /* Gradiente Naranja/Dorado */
}

/* Estilo para el TERCER chip de la lista */
.genres-chips .chip:nth-child(3) {
    background-image: linear-gradient(160deg, #6ac8ff, #3d8bff); /* Gradiente Azul Eléctrico */
}

/* --- 3. Efecto Interactivo (Hover) --- */
.genres-chips .chip:hover {
    transform: translateY(-3px) scale(1.05); /* Se levanta y agranda un poco */
    filter: brightness(1.15); /* Aumenta el brillo del gradiente */
    cursor: default; /* Muestra que no es clicable */
}

#char-bio {
    font-size: 0.95rem;
    line-height: 1.6;
    margin: 0;
}

.info-card ul {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 0.2rem;
}

.info-card ul li {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

/* --- Carrusel Central --- */
.carousel-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
}

.character-name {
    color: white;
    font-size: 2.5rem;
    text-shadow: 0 0 15px rgba(255, 255, 255, 0.8);
    margin-bottom: 1rem;
    text-align: center;
}

.character-carousel {
    width: 100%;
    height: 500px; /* Altura fija para contener las imágenes */
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    perspective: 1000px; /* Activa la perspectiva 3D */
    transform-style: preserve-3d; /* Permite que los hijos se muevan en 3D */
}

.character-slide {
    position: absolute;
    transition: transform 0.5s ease-in-out, filter 0.5s ease-in-out, opacity 0.5s ease-in-out;
    cursor: pointer;
}

.character-slide img {
    width: 100%;
    max-height: 480px;
    object-fit: contain;
    user-select: none; /* Evita que la imagen se pueda arrastrar */
}

/* --- Estados del Carrusel --- */
.character-slide {
    opacity: 0;
    transform: scale(0); /* Estado inicial oculto */
}

.character-slide.is-prev {
    transform: translateX(-180px) translateZ(-200px) rotateY(35deg) scale(0.7);
    filter: brightness(0.4);
    opacity: 1;
    z-index: 1;
}

.character-slide.is-active {
    transform: translateX(0) translateZ(0) rotateY(0) scale(1);
    filter: brightness(1.1) drop-shadow(0 0 25px rgba(77, 208, 225, 0.8)); /* Glow effect */
    opacity: 1;
    z-index: 10;
}

.character-slide.is-next {
    transform: translateX(180px) translateZ(-200px) rotateY(-35deg) scale(0.7);
    filter: brightness(0.4);
    opacity: 1;
    z-index: 1;
}


/* --- Navegación del Carrusel --- */
.carousel-nav {
    margin-top: 1rem;
}

.nav-arrow {
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid white;
    color: white;
    font-size: 1.5rem;
    padding: 0.5rem 1.5rem;
    margin: 0 0.5rem;
    cursor: pointer;
    border-radius: 8px;
    transition: background-color 0.3s;
}

.nav-arrow:hover {
    background: rgba(77, 208, 225, 0.5);
}


/* ===================================
   DISEÑO RESPONSIVE
   =================================== */
@media (max-width: 992px) {
    .character-selection-stage {
        padding: 1rem;
        overflow-y: auto; /* Permitir scroll en pantallas pequeñas */
    }

    .selection-container {
        grid-template-columns: 1fr; /* Apila todo en una columna */
        gap: 1.5rem;
        max-width: 500px;
        margin: auto;
    }
    
    /* Poner el carrusel primero visualmente */
    .carousel-container {
        order: -1;
    }

    .info-column {
        width: 100%;
        max-height: none; /* Quitar la altura máxima */
    }

    /* En móvil, ocultar los personajes de los lados para simplificar */
    .character-slide.is-prev,
    .character-slide.is-next {
        display: none;
    }

    .character-slide.is-active {
        position: relative; /* Cambiar a relativo para que ocupe espacio */
    }

    .character-carousel {
        height: auto;
        min-height: 400px;
    }
}

/* ===================================
   ESTILOS PARA ICONOS DE TARJETAS
   =================================== */

/* Color verde lima para los iconos */
.icon-lime {
    color: #4de190; /* Un verde lima brillante y legible */
}

/* Espaciado para los iconos que están dentro de una lista */
.info-card ul li .fas {
    width: 20px; /* Asegura que todos los iconos ocupen el mismo espacio */
    margin-right: 0.75rem; /* Margen a la derecha para separar el icono del texto */
    text-align: center; /* Centra el icono dentro de su espacio asignado */
}

/* ========================================================
   ESTILOS REFINADOS PARA BOTONES DE ACCIÓN (INCLUIDO/COMPRAR)
   ======================================================== */

/* --- Contenedor de los botones --- */
.action-buttons-container {
    display: flex;
    gap: 0.75rem; /* Espacio reducido entre botones */
    margin-top: 1.25rem; /* Espacio respecto a la sinopsis */
}

/* --- Estilo Base para ambos botones (Ahora más sutil) --- */
.btn-action {
    flex-grow: 1;
    padding: 0.6em 1em; /* Padding más pequeño y proporcional */
    font-size: 0.9rem; /* Fuente más pequeña */
    font-weight: 600; /* Semi-bold es más elegante que bold */
    border-radius: 8px;
    border: 2px solid rgba(255, 255, 255, 0.25); /* Borde grisáceo por defecto */
    background: transparent; /* Fondo transparente por defecto */
    color: rgba(255, 255, 255, 0.6);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    transition: all 0.25s ease-out; /* Transición más rápida y suave */
    /* Quitamos cualquier transform que pueda causar problemas */
    transform: none; 
}

/* --- Estado Desactivado (Más integrado) --- */
.btn-action[disabled] {
    background: rgba(30, 40, 50, 0.3);
    color: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.1);
    cursor: not-allowed;
    box-shadow: none;
}

/* --- Estado Activado: INCLUIDO (Elegante y sutil) --- */
.btn-incluido.is-active {
    /* El truco: el color lo dan el borde y el texto, no el fondo */
    border-color: #00f2c3; /* Borde cian luminoso */
    color: #e0fffa; /* Texto de un color cian muy claro, casi blanco */
    /* Un fondo radial muy sutil que da la sensación de luz interior */
    background: radial-gradient(circle at center, rgba(0, 242, 195, 0.1) 0%, transparent 70%);
    /* Un glow más controlado y elegante */
    box-shadow: 0 0 12px rgba(0, 242, 195, 0.5);
}

/* --- Estado Activado: COMPRAR (Naranja destacado pero sin crecer) --- */
.btn-comprar.is-active {
    background-image: linear-gradient(160deg, #ffab40, #ff6f00);
    color: #fff;
    border-color: transparent; /* El gradiente ya define el borde */
    /* Glow naranja bien definido */
    box-shadow: 0 0 15px rgba(255, 111, 0, 0.6);
    /* IMPORTANTE: quitamos el transform: scale() para evitar el scroll */
}

/* --- Efectos Hover (Sutiles y sin afectar al layout) --- */
.btn-action.is-active:not([disabled]):hover {
    transform: translateY(-2px); /* Se eleva ligeramente */
    filter: brightness(1.15);   /* Aumenta el brillo general */
}

/* El botón desactivado NO debe tener efecto hover */
.btn-action[disabled]:hover {
    transform: none;
    filter: none;
}

/* ===================================
   ESTILO PARA BOTÓN PRINCIPAL "EMPEZAR HISTORIA"
   =================================== */
.btn-start-story {
    /* Posicionamiento y tamaño */
    padding: 0.8rem 1.5rem;
    margin-top: 1rem; /* Espacio para separarlo de la imagen */
    margin-bottom: 1.5rem; /* Espacio para separarlo de las flechas */
    width: 90%; /* Ancho relativo para que se ajuste bien */
    max-width: 400px; /* Ancho máximo para que no sea enorme */
    
    /* Diseño y tipografía */
    font-size: 1rem;
    font-weight: bold;
    letter-spacing: 0.5px;
    border-radius: 50px; /* Forma de píldora, muy moderna */
    border: 2px solid transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    
    /* Animación */
    transition: all 0.3s ease;
}

/* --- Estado Activado (Verdoso y luminoso) --- */
.btn-start-story.is-active {
    background-image: linear-gradient(135deg, #00c9a7, #92fe9d); /* Gradiente verde-agua/lima */
    color: #0d3d35; /* Un verde muy oscuro para el texto, casi negro */
    border-color: #c8ffcf; /* Un borde verde pálido que complementa */
    box-shadow: 0 4px 20px rgba(0, 242, 195, 0.4); /* Glow sutil */
}

/* --- Estado Desactivado --- */
.btn-start-story[disabled] {
    background: rgba(42, 59, 74, 0.8);
    color: rgba(255, 255, 255, 0.3);
    border-color: rgba(255, 255, 255, 0.2);
    cursor: not-allowed;
    box-shadow: none;
}

/* --- Efecto Hover (solo para el botón activo) --- */
.btn-start-story.is-active:hover {
    transform: translateY(-3px); /* Se eleva un poco */
    box-shadow: 0 6px 25px rgba(0, 242, 195, 0.6); /* El glow se intensifica */
    filter: brightness(1.05);
}

/* ========================================================
   AJUSTES DE LAYOUT Y NUEVA TARJETA DE PRESTACIONES
   ======================================================== */

/* --- Título de la columna derecha --- */
.right-column-title {
    color: #f0f0f0;
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
}

/* --- Ajuste para el nombre del personaje en su nueva posición --- */
.character-name {
    margin-top: 1rem;
    margin-bottom: 0.5rem;
    font-size: 2.2rem; /* Ligeramente más pequeño para que no domine tanto */
}

/* --- Layout de 3 columnas para la tarjeta de prestaciones (más compacto) --- */
#char-multimedia {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* Volvemos a 3 columnas */
    gap: 0.6rem 0.5rem; /* Reducimos el espacio vertical y horizontal al mínimo */
}

/* --- Estilo de cada item de la lista de prestaciones --- */
#char-multimedia li {
    display: flex;
    flex-direction: row; /* Icono y valor en horizontal */
    align-items: center;
    gap: 0.5rem; /* Espacio entre icono y valor */
    font-size: 0.85rem;
}

/* Icono de la prestación */
#char-multimedia li .fas {
    font-size: 1rem; /* Icono un poco más pequeño */
    color: #94b896;
    margin: 0;
    width: 18px; /* Ancho fijo para alineación */
    text-align: center;
}}

/* Contenedor del valor (ocupa el resto del espacio) */
.prestacion-value {
    font-weight: 600;
    flex-grow: 1; /* Para que el texto se alinee a la derecha */
    text-align: right; /* Alineamos los números a la derecha */
}

/* Contador activo (ej: "1" de 1/4) */
.active-count {
    color: #ffab40; /* Naranja */
}

/* Contador total (ej: "/4" de 1/4) */
.total-count {
    color: #64748b; /* Gris */
}

/* Check activo (Naranja) */
.check-active {
    color: #68e16f;
}

/* Check inactivo (Gris) */
.check-inactive {
    color: #475569;
    opacity: 0.6;
}

/* Texto (ej: Ilimitado) */
.prestacion-text {
    color: #cbd5e1;
}

/* Botón "Adquirir Prestación" más compacto */
.btn-adquirir-prestacion {
    width: 100%;
    margin-top: 1rem; /* Menos espacio superior */
    background: #4ddd6b2e;
    border: 1px solid #4de190;
    color: #4de190;
    padding: 0.4rem; /* Menos padding */
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.8rem;
    font-weight: 600;
    transition: all 0.2s ease;
}

.btn-adquirir-prestacion:hover {
    background-color: #475569;
    color: #fff;
}

/* ========================================================
   ESTILOS PARA TARJETA "RELATOS PARALELOS"
   ======================================================== */

/* --- Estilo para el relato desactivado --- */
#char-relatos li.is-disabled {
    color: #96ae97; /* Color de texto gris y apagado */
    opacity: 0.6;
    pointer-events: none; /* Evita que se pueda seleccionar o interactuar */
}

/* También apagamos el color del icono dentro del relato desactivado */
#char-relatos li.is-disabled .icon-lime {
    color: inherit; /* Hereda el color gris del texto */
}

/* --- Contenedor para los nuevos botones dentro de las tarjetas --- */
.card-actions-row {
    display: flex;
    gap: 0.75rem;
    margin-top: 1rem; /* Espacio respecto a la lista */
    border-top: 1px solid rgba(255, 255, 255, 0.1); /* Línea separadora sutil */
    padding-top: 1rem;
}

/* --- Estilo base para los botones internos de las tarjetas --- */
.btn-card-action {
    flex-grow: 1;
    background: #4ddd6b2e;
    border: 1px solid #4de190;
    color: #4de190;
    padding: 0.5rem;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.8rem;
    font-weight: 600;
    transition: all 0.2s ease;
}

.btn-card-action:hover {
    background-color: #475569;
    color: #fff;
}

/* Botón primario (Comprar) con un toque de color */
.btn-card-action.btn-card-action--primary {
    background-color: rgba(255, 171, 64, 0.15); /* Fondo naranja muy sutil */
    border-color: #ffab40;
    color: #ffab40;
}

.btn-card-action.btn-card-action--primary:hover {
    background-color: #ffab40;
    color: #1a1a1a;
}

/* ========================================================
   ESTILOS PARA TARJETA "ALTERNATIVAS DE RUTAS"
   ======================================================== */

/* Asegura que el contador se empuje a la derecha */
#char-rutas li {
    display: flex;
    justify-content: space-between; /* Clave para separar el texto del contador */
    width: 100%;
}

/* El botón 'Ampliar' ya usa la clase .btn-card-action,
   por lo que no necesita nuevos estilos. */
   
 /* ======================================================
   NUEVOS ESTILOS PARA LA GUÍA TIPO TOOLTIP (v2)
   ====================================================== */

.tutorial-popover {
    position: fixed;
    z-index: 10000;
    background: #049457;
    color: #ecf0f1;
    border: 1px solid #34495e;
    border-radius: 10px;
    padding: 1rem;
    width: 400px;
    max-width: 90vw;
    box-shadow: 0 5px 25px rgba(0, 0, 0, 0.4);
    transition: opacity 0.2s ease, transform 0.2s ease;
    transform: translateY(10px);
    opacity: 0;
}
.tutorial-popover.is-hidden { display: none; }
.tutorial-popover.is-visible { opacity: 1; transform: translateY(0); }

/* --- La flecha que señala --- */
.tutorial-popover__arrow {
    position: absolute;
    width: 14px;
    height: 14px;
    background: #049457;
    border-top: 1px solid #34495e;
    border-left: 1px solid #34495e;
}

/* --- Clases para posicionar la flecha --- */
.tutorial-popover.arrow-top .tutorial-popover__arrow {
    top: -8px; /* Se posiciona en el borde superior del popover */
    transform: rotate(45deg); /* Gira para apuntar hacia arriba */
}
/* Cuando el tooltip está ENCIMA (position: 'top'), la flecha apunta HACIA ABAJO */
.tutorial-popover.arrow-bottom .tutorial-popover__arrow {
    bottom: -8px; /* Se posiciona en el borde inferior del popover */
    transform: rotate(225deg); /* Gira para apuntar hacia abajo */
}

/* Las reglas para 'left' y 'right' ya deberían estar bien */
.tutorial-popover.arrow-left .tutorial-popover__arrow {
    left: -8px;
    top: 50%;
    transform: translateY(-50%) rotate(-45deg);
}
.tutorial-popover.arrow-right .tutorial-popover__arrow {
    right: -8px;
    top: 50%;
    transform: translateY(-50%) rotate(135deg);
}

/* --- Contenido y botones --- */
.tutorial-popover__text { margin: 0; font-size: 0.9rem; line-height: 1.6; }
.tutorial-popover__footer { margin-top: 1rem; display: flex; justify-content: space-between; align-items: center; }
.tutorial-popover__btn-close { background: transparent; border: none; color: #313131; cursor: pointer; font-weight: 600; }
.tutorial-popover__btn-next { background-color: #aeea00; color: #1e293b; border: none; padding: 0.5rem 1rem; border-radius: 6px; font-weight: bold; cursor: pointer; }




.nav-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background-color: #475569;
    border: none;
    cursor: pointer;
    transition: background-color 0.3s, transform 0.3s;
}

.nav-dot.is-active {
    background-color: #aeea00; /* Verde lima para el punto activo */
    transform: scale(1.3);
}

/* === Fix floater: siempre visible en desktop, oculto con modal abierto === */
@media (min-width: 1024px){
  .sb-floater{
    display: block !important;
    opacity: 1 !important;
    pointer-events: auto !important;
    transform: translateY(-50%); /* mantiene posición centrada */
  }
}
.has-open-modal .sb-floater{
  display: none !important;
}

/* ===== Simulación de Nudos (escopado al modal) ===== */
#sim-nudos-modal .nudos-sim-panel{
  display:flex; flex-direction:column; gap:0;
  /* hereda estilos base de .screen-modal__panel ya definidos */
}

/* Encabezado fijo */
#sim-nudos-modal .nudos-header{
  position: sticky; top: 0; z-index: 2;
  display:flex; align-items:center; justify-content:space-between;
  padding: 14px 18px;
  background: #131313;
  border-bottom: 2px solid #bfff00; /* verde lima */
}
#sim-nudos-modal .nudos-title{
  margin:0; font-weight: 800; letter-spacing:.2px;
  color:#bfff00; /* lima */
  text-transform: none;
}
#sim-nudos-modal .nudos-actions .nudos-help{
  background:transparent; border:1px solid rgba(191,255,0,.45);
  color:#bfff00; border-radius:10px; padding:8px 10px; cursor:pointer;
  display: none;
}
#sim-nudos-modal .nudos-actions .nudos-help:hover{ background: rgba(191,255,0,.08); }

/* Intro overlay */
#sim-nudos-modal .nudos-intro{ position:absolute; inset:0; z-index: 5; display:none; }
#sim-nudos-modal .nudos-intro.is-open{ display:block; }
#sim-nudos-modal .nudos-intro__backdrop{
  position:absolute; inset:0;
  background: rgba(0,0,0,.75);
  backdrop-filter: blur(4px);
}
#sim-nudos-modal .nudos-intro__card{
  position: relative; z-index:1;
  width:min(680px, 92vw); margin: 8vh auto 0; padding: 24px;
  border-radius: 16px;
  border:1px solid rgba(191,255,0,.35);
  background: linear-gradient(145deg, #1f2937, #0f172a);
  color: #e8f0e8;
  box-shadow: 0 20px 60px rgba(0,0,0,.45);
}
#sim-nudos-modal .nudos-intro__text{ line-height:1.75; }
#sim-nudos-modal .nudos-intro__actions{ display:flex; justify-content:flex-end; gap:12px; margin-top:16px; }

/* Reader + Página “libro” */
#sim-nudos-modal .nudos-reader{
  position: relative; z-index:1; display:flex; flex-direction:column; gap: 22px;
  padding: 20px 16px 96px; /* deja espacio al footer */
}
#sim-nudos-modal .nudos-page{
  position: relative; margin: 0 auto; width: min(980px, 92vw);
  background: #f4ecd8; color:#1f2937;
  border-radius: 14px; border:1px solid #e9dfc6;
  box-shadow: 0 10px 40px rgba(0,0,0,.25), inset 0 0 0 1px rgba(255,255,255,.6);
  padding: clamp(18px, 2vw, 28px);
  min-height: 44vh;
  overflow: hidden;
}
#sim-nudos-modal .nudos-page h3{
  margin:0 0 10px; color:#3b3a2f; font-weight:800;
}
#sim-nudos-modal .nudos-page p{ margin: 12px 0; font-size: 1.0rem;
    line-height: 1.6; }

/* Fondo especial para páginas de pregunta (4 y 9) */
#sim-nudos-modal .nudos-page.has-bg{
  background-size: cover; background-position: center;
  color:#0f172a;
  border-color: rgba(0,0,0,.12);
  text-shadow: 0 1px 0 rgba(255,255,255,.35);
}
#sim-nudos-modal .nudos-page .question{
    background: rgb(35 35 35 / 80%);
    border: 1px solid rgba(0, 0, 0, .08);
    border-radius: 12px;
    padding: 16px;
    margin: 10px 0 16px;
    font-size: 30px;
    color: #15df7a;
    box-shadow: 0 0 12px rgba(21, 223, 122, 0.7);
}
#sim-nudos-modal .nudos-page .options{
  display:flex; gap:10px; flex-wrap:wrap; margin-top:8px;
}
#sim-nudos-modal .nudos-page .option-btn{
border: 1px solid #0fbf0c;
    background: #303930d4;
    color: #2be76f;
    border-radius: 10px;
    padding: 10px 12px;
    cursor: pointer;
    font-weight: 700;
    box-shadow: 0 0 12px rgba(21, 223, 122, 0.7);
    font-size: 16px;
}
#sim-nudos-modal .nudos-page .option-btn:hover{ background:#0b2308; }

/* Marcado interactivo para frases con tooltip */
#sim-nudos-modal .nudo-step{
  position:relative; cursor:pointer;
  border-bottom:2px dotted rgb(234 97 0 / 90%) !important;
  padding-bottom: 1px;
}
#sim-nudos-modal .nudo-step:hover{ background: rgba(0,0,0,.06); }
#sim-nudos-modal .nudo-step .nudo-icon{
  font-size:.85em; color:#64748b; margin-left: 6px;
}

/* Footer con navegación */
#sim-nudos-modal .nudos-footer{
  position: sticky; bottom: 0; z-index: 2;
  display:flex; align-items:center; justify-content:space-between;
  padding: 12px 16px; margin-top: 10px;
  background: linear-gradient(180deg, rgba(19,19,19,0) 0%, rgba(19,19,19,.8) 35%, rgba(19,19,19,1) 100%);
  border-top:1px solid rgba(191,255,0,.25);
}
#sim-nudos-modal .nudos-btn{
  border:1px solid #475569; background: #0b1220; color:#e2e8f0;
  padding:10px 12px; border-radius: 10px; font-weight:700; cursor:pointer;
}
#sim-nudos-modal .nudos-btn:hover{ filter: brightness(1.06);}
#sim-nudos-modal .nudos-btn[disabled]{ opacity:.45; cursor:not-allowed; }
#sim-nudos-modal .nudos-btn--primary{ border-color:#6f5d2b; background:#bb9b6b; color:#0a0a0a; }
#sim-nudos-modal .nudos-btn--ghost{ background:transparent; }

/* Animación “pasar página” */
@keyframes pageOutRight{
  0%{ transform: perspective(1200px) rotateY(0) translateX(0); opacity:1; }
  100%{ transform: perspective(1200px) rotateY(-18deg) translateX(-12%); opacity:.0; }
}
@keyframes pageInRight{
  0%{ transform: perspective(1200px) rotateY(18deg) translateX(12%); opacity:0; }
  100%{ transform: perspective(1200px) rotateY(0) translateX(0); opacity:1; }
}
@keyframes pageOutLeft{
  0%{ transform: perspective(1200px) rotateY(0) translateX(0); opacity:1; }
  100%{ transform: perspective(1200px) rotateY(18deg) translateX(12%); opacity:.0; }
}
@keyframes pageInLeft{
  0%{ transform: perspective(1200px) rotateY(-18deg) translateX(-12%); opacity:0; }
  100%{ transform: perspective(1200px) rotateY(0) translateX(0); opacity:1; }
}
#sim-nudos-modal .nudos-page.anim-next-out{ animation: pageOutRight .36s ease forwards; }
#sim-nudos-modal .nudos-page.anim-next-in { animation: pageInRight  .36s ease forwards; }
#sim-nudos-modal .nudos-page.anim-prev-out{ animation: pageOutLeft  .36s ease forwards; }
#sim-nudos-modal .nudos-page.anim-prev-in { animation: pageInLeft   .36s ease forwards; }

/* Adaptativo */
@media (max-width: 640px){
  #sim-nudos-modal .nudos-footer{ flex-direction:column; gap:10px; align-items:stretch; }
  #sim-nudos-modal .nudos-footer__nav{ display:flex; gap:8px; }
}

/* === Simulación de Nudos: ajustes de layout y accesibilidad visual === */

/* 1) Ocultar el botón inferior de cerrar (ya tenemos la X) */
#sim-nudos-modal #nudos-close { 
  display: none !important; 
}

/* 2) Ocultar navegación del footer (vamos a mostrarla dentro del lienzo) */
#sim-nudos-modal .nudos-footer__nav { 
  display: none !important; 
}
#sim-nudos-modal .nudos-footer{
  padding: 0 !important;
  margin-top: 0 !important;
  border-top: 0 !important;
  background: transparent !important;
  height: 0 !important;
}

/* 3) Subir y compactar el título (encabezado fijo) */
#sim-nudos-modal .nudos-header{
  padding: 10px 16px !important;   /* antes 14px 18px */
  border-bottom-width: 1px !important; /* más fino */
}
#sim-nudos-modal .nudos-title{
  line-height: 1.2;
  font-size: clamp(18px, 2.2vw, 22px);
}

/* 4) Lienzo de lectura a altura fija (máxima posible) */
/*  - Se ajusta vía JS con la var --nudos-page-h  */
#sim-nudos-modal .nudos-reader{
  padding: 12px 16px 16px !important;  /* menos padding, ganamos alto */
}
#sim-nudos-modal .nudos-page{
  height: var(--nudos-page-h, 65vh) !important; /* altura fija del lienzo */
  overflow: auto;                                  /* scroll solo si hay mucho texto */
}

/* 5) Páginas con fondo (4 y 9): cubrir, sin scroll */
#sim-nudos-modal .nudos-page.has-bg{
  background-color: transparent !important;
  background-repeat: no-repeat;
  background-position: center;
  background-size: cover;
  overflow: hidden; /* nunca scroll en páginas con imagen */
}

/* 6) Preguntas (4 y 9) en parte inferior, centradas */
#sim-nudos-modal .nudos-page.has-bg .question,
#sim-nudos-modal .nudos-page.has-bg .options{
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  width: min(92%, 860px);
}
#sim-nudos-modal .nudos-page.has-bg .question{
  bottom: 110px;          /* encima de las opciones */
  text-align: center;
}
#sim-nudos-modal .nudos-page.has-bg .options{
  bottom: 20px;
  justify-content: center;
}
#sim-nudos-modal .nudos-page.has-bg .option-btn{
  font-weight: 700;
}

/* 7) Navegación “in-page” (elegante y sutil) dentro del lienzo */
#sim-nudos-modal .nudos-nav-inline{
  position: absolute;
  right: 14px;
  bottom: 14px;
  display: flex;
  gap: 8px;
  z-index: 3;
}
#sim-nudos-modal .nudos-nav-inline .nudos-btn{
  padding: 8px 10px;
  border-radius: 10px;
}
#sim-nudos-modal .nudos-nav-inline #nudos-prev-in,
#sim-nudos-modal .nudos-nav-inline #nudos-next-in{
  min-width: 42px;
}

/* 8) Asegurar que la X de cierre quede por encima del header */
#sim-nudos-modal .screen-modal__close{
  z-index: 1000 !important;
}

/* === NUDOS – resaltado más visible para frases con tooltip === */
#sim-nudos-modal .nudo-step{
  border-bottom: 2px dotted rgb(195 151 53 / 90%) !important;
  box-shadow: inset 0 -2px 0 rgb(234 162 0 / 12%);
}
#sim-nudos-modal .nudo-step:hover{
  background: rgba(174,234,0,.12) !important;
}
#sim-nudos-modal .nudo-step .nudo-icon{
  color: #ea8400 !important;            /* icono info más llamativo */
  opacity: .95;
}
/* === NUDOS – visibilidad del botón 'anterior' (ghost) === */
#sim-nudos-modal .nudos-nav-inline #nudos-prev-in{
  background: #bdb298 !important;
  color: #e2e8f0 !important;
  border: 1px solid #475569 !important;
}
#sim-nudos-modal .nudos-nav-inline #nudos-prev-in:disabled,
#sim-nudos-modal .nudos-nav-inline #nudos-next-in:disabled{
  opacity:.35; cursor:not-allowed;
}

/* === NUDOS – ocultar flechas en páginas de pregunta === 
#sim-nudos-modal .nudos-page.has-bg .nudos-nav-inline{
  display: none !important;
}
*/

/* === NUDOS – el modal no scrollea; sólo la 'página de libro' === */
#sim-nudos-modal .screen-modal__panel{
  overflow: hidden !important; /* evita scroll en el contenedor principal */
}
/* el lienzo (article.nudos-page) ya tiene overflow:auto y altura fija por --nudos-page-h */

p.descr {
    font-size: 15px !important;
    color: #95662a;
	font-style: italic;
}

/* ===== MODAL: pantalla completa, sin título y sin scroll innecesario ===== */
.screen-modal__title{ display:none; }
.screen-modal__panel{
  margin:0; max-width:none; width:100vw; height:100vh;
  border-radius:0; padding:24px 24px 28px;
  overflow:hidden;             /* sólo scroll si algo se sale de .cs-stage */
  box-sizing: border-box;
}
.cs-stage{
  height: calc(100vh - 24px - 28px); /* adapta a los paddings del panel */
  display:grid; align-items:stretch;
}

/* ===== NOMBRE DEL PERSONAJE al pie de la imagen central ===== */
.cs-hero-name{
  margin: 10px auto 6px;
  text-align:center;
  font-size: clamp(1.6rem, 3.2vw, 2.4rem);
  font-weight: 900;
  letter-spacing: .3px;
  color: #ffffff;
  text-shadow: 0 2px 16px rgba(0,0,0,.6), 0 0 18px rgba(0,255,153,.35);
}

/* Rellena automáticamente con el figcaption central si existe */
.cs-avatar--center .cs-avatar__name{ display:none; } /* ocultamos el figcaption original */
.character-carousel::after{
  content: attr(data-current-name);
  /* lo escribimos desde JS con dataset, ver nota más abajo */
  display:none;
}

/* ===== BOTÓN PRINCIPAL: grande, verde, encima de flechas ===== */
.cs-primary-action{
  display:flex; justify-content:center; align-items:center;
  margin: 6px 0 8px;
}
.btn{ font: inherit; }
.btn--primary{
  padding: 14px 22px; border:0; border-radius: 999px;
  background: linear-gradient(180deg, #2df79c, #0ccf78);
  box-shadow: 0 10px 28px rgba(0,255,153,.25), 0 0 30px rgba(0,255,153,.20) inset;
  color:#0b2a1f; font-weight: 900; cursor:pointer;
}
.btn--primary[disabled]{ opacity:.6; cursor:not-allowed; filter: grayscale(.2); }

/* ===== Flechas debajo (ya estaban), sin cambios estructurales ===== */
.cs-navbar{ display:flex; justify-content:center; gap:12px; margin:6px auto 0; }

/* ===== CTA izquierda: Incluido / Comprar (debajo de Bio) ===== */
.cs-cta-left{
  display:flex; gap:12px; margin-top:10px;
}
.btn--ghost{
  padding:10px 14px; border-radius:10px; cursor:pointer;
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.22);
  color:#e8ffee; font-weight:700;
}
.btn--ghost[disabled]{ opacity:.5; cursor:not-allowed; }

/* ===== Ajustes de tarjetas para conservar look correcto ===== */
.cs-card{ backdrop-filter: blur(6px); }
.cs-card--bio{ max-width:300px; }           /* Bio estrecha como en la “correcta” */
#cs-card-generos{ max-width: 340px; }

/* ===== Responsive fino ===== */
@media (max-width: 900px){
  .cs-hero-name{ margin-top: 8px; }
  .btn--primary{ width: min(92%, 520px); }
}

/* === Estado ACTIVO para los CTAs "Incluido" y "Comprar" === */
/* Se activa con: .is-active  o  aria-pressed="true"  o  data-state="active" */

.cs-cta-left .btn--ghost:not([disabled]) {
  transition: transform .12s ease, box-shadow .2s ease, filter .15s ease, background .2s ease, border-color .2s ease;
}
.cs-cta-left .btn--ghost:not([disabled]):hover { filter: brightness(1.05); transform: translateY(-1px); }

/* INCLUIDO (verde) */
#btn-incluido.is-active,
#btn-incluido[aria-pressed="true"],
#btn-incluido[data-state="active"]{
  background: linear-gradient(180deg, #30f5a7, #09cb7b);
  border-color: #21e09b;
  color: #062e1f;
  box-shadow: 0 8px 22px rgba(0, 255, 170, .28), 0 0 24px rgba(0,255,170,.18) inset;
}

/* COMPRAR (naranja) */
#btn-comprar.is-active,
#btn-comprar[aria-pressed="true"],
#btn-comprar[data-state="active"]{
  background: linear-gradient(180deg, #ffc56b, #ff9b2d);
  border-color: #ffb056;
  color: #3b2100;
  box-shadow: 0 8px 22px rgba(255, 158, 74, .28), 0 0 24px rgba(255,170,90,.18) inset;
}

/* Borde de foco accesible */
#btn-incluido:focus-visible,
#btn-comprar:focus-visible{
  outline: 2px solid rgba(255,255,255,.6);
  outline-offset: 2px;
  box-shadow: 0 0 0 3px rgba(255,255,255,.15);
}

/* =======================
   SIMULACIÓN · NUDOS (réplica usuarios)
======================= */

/* Modal full-screen, sin scroll global */
.nudos-panel{
  margin:0; padding:24px; width:100vw; height:100vh;
  max-width:none; border-radius:0;
  overflow:hidden;           /* <- no scroll del modal */
  box-sizing:border-box;
  display:block; position:relative;
}

/* Stage cubre todo el panel */
.nudos-stage{ position:relative; width:100%; height:100%; }

/* ===== Intro a pantalla completa ===== */
.nudos-intro{
  position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
  background: radial-gradient(80% 60% at 50% 50%, rgba(0,0,0,.36) 0%, rgba(0,0,0,.7) 100%);
  z-index:5;
}
.nudos-intro__box{
  width:min(860px, 92vw);
  background: rgba(18,18,18,.85);
  border:1px solid rgba(255,255,255,.12);
  border-radius:16px; padding:24px 24px 18px;
  box-shadow: 0 12px 40px rgba(0,0,0,.45), 0 0 60px rgba(0,255,140,.18);
  color:#ecf2ef;
}
.nudos-intro__title{ margin:0 0 8px; font-size: clamp(1.2rem, 2.4vw, 1.6rem); }
.nudos-intro__lead{ margin:0 0 14px; opacity:.95; }
.nudos-intro__actions{ display:flex; gap:12px; }

/* ===== Lienzo de lectura ===== */
.nudos-reader{
  position:absolute; inset:0; display:flex; flex-direction:column;
  z-index:3;                  /* por debajo de la intro */
}
.nudos-page-wrap{
  --footer-h: 56px;           /* alto del footer con botones */
  flex:1 1 auto;
  height: calc(100% - var(--footer-h));
  overflow: auto;             /* <- scroll SOLO aquí si el texto lo requiere */
  display:flex; align-items:flex-start; justify-content:center;
  padding: 12px 24px 12px;
}
.nudos-page{
  width:min(1080px, 92vw);
  background: #f2e6cf;        /* crema */
  color:#222; border-radius:14px;
  border:1px solid rgba(0,0,0,.08);
  box-shadow:
    0 16px 36px rgba(0,0,0,.25),
    0 0 0 1px rgba(255,255,255,.65) inset;
  padding: 22px 26px;
}

/* ===== Controles fijos al pie ===== */
.nudos-footer{
  position:absolute; right:24px; bottom:24px; height: var(--footer-h);
  display:flex; align-items:center; justify-content:flex-end; gap:10px;
  pointer-events:auto;
}
.nudos-nav{ display:flex; gap:10px; }
.nudos-btn{
  min-width:40px; height:40px; border-radius:10px; cursor:pointer; font-weight:800;
  border:1px solid rgba(0,0,0,.15); background:#e6d5b8; color:#2b1d07;
  box-shadow: 0 4px 16px rgba(0,0,0,.15);
}
.nudos-btn--primary{ background:#e6b367; }
.nudos-btn--ghost{ background:#d9c7a8; }

/* ===== Estados Intro vs Lectura ===== */
.nudos-panel[data-state="intro"]  #nudos-reader{ display:none; }
.nudos-panel[data-state="intro"]  #nudos-intro{ display:flex; }
.nudos-panel[data-state="reading"]#nudos-reader{ display:flex; }
.nudos-panel[data-state="reading"]#nudos-intro{ display:none; }

/* Asegura que el backdrop no recorta los tooltips */
#nudos-popover{ z-index: 10; }

body.has-open-modal { overflow: hidden; }             /* bloquea body */
.nudos-reader { position: relative; overflow: auto; } /* scroll solo del lienzo */
.nudos-footer { position: absolute; right: 0.75rem; bottom: 0.5rem; }

/* El panel del modal de Nudos a pantalla completa y sin scroll global */
#sim-nudos-modal .screen-modal__panel{
  margin: 0; max-width: none; width: 100vw; height: 100vh;
  border-radius: 0; padding: 24px;
  overflow: hidden;         /* solo scrollea el lienzo (.nudos-page) */
}

/* Cabecera lima fija y por encima del contenido */
#sim-nudos-modal .nudos-header{
  position: sticky; top: 0; z-index: 5;
  display: flex; align-items: center; justify-content: space-between;
  padding: 14px 18px;
  background: #131313;
  border-bottom: 2px solid #bfff00;
}

p.descr, p.footnote {
    font-size: 15px !important;
    color: #95662a;
	font-style: italic;
}

 /* Estilos básicos SIMULACIÓN NUDOS GOOGLE AI para centrar el botón en esta página de demostración */

        .btn-sim { /* Estilos del botón de la página original para consistencia */
            display:inline-block; 
            border:1px solid #ffa34d; 
            background: linear-gradient(180deg,#ffb466,#f7981d);
            color:#1b1103; 
            font-weight:700; 
            padding:12px 18px; 
            border-radius: 12px; 
            cursor:pointer;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
        }

        .btn-sim:hover{ filter: brightness(1.05); }

 /* PARA BAJAR LOS PERSOBAJES */
/* Desplaza solo la imagen dentro de cada slide */
.carousel-container { 
  --char-img-shift: 60px; /* Ajusta: 0–80px suele ir bien */
}

.character-slide img {
  transform: translateY(var(--char-img-shift));
  will-change: transform;
  /* Para que no invada los controles, reducimos su altura efectiva */
  max-height: calc(480px - var(--char-img-shift));
  object-fit: contain;
}

/* Opcional: solo desplazar la activa (las prev/next quedan un pelín más altas) */
/*
.character-slide.is-active img {
  transform: translateY(var(--char-img-shift));
  max-height: calc(480px - var(--char-img-shift));
}
*/

/* En móvil, baja un poco menos */
@media (max-width: 992px){
  .carousel-container { --char-img-shift: 28px; }
}






