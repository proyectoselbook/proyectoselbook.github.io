/* =================================================================
   ARCHIVO DE ESTILOS GENERALES: STYLE.CSS (VERSIÓN DEFINITIVA Y CORRECTA)
   ================================================================= */

/* =================================================================
   ARCHIVO DE ESTILOS GENERALES: STYLE.CSS (CON TEMAS DE COLOR)
   ================================================================= */

/* 1. VARIABLES GENERALES Y RESET */
:root {
  /* Variables Fijas (no cambian) */
  --header-height: 120px;
  --sidebar-width: 300px;
  --sidebar-offset: 15px;
  --text-dark: #212121;
  --text-light: #FFFFFF;
  --border-radius: 8px;
  
  --sticky-offset: 200px;
  
  
 

  
  /* Colores de Acento Genéricos (estos cambiarán de valor) */
  --section-gradient-start: #061704;
  --section-gradient-mid:   #2f8030;
  --section-gradient-end:   #07700c;
  --section-accent-color: #00ff8c;
  --section-accent-glow: rgba(0, 255, 140, 0.7);
  --section-button-color: #FF8C00;
  --section-button-hover: #FFA94D;
  --section-button-glow: rgba(255, 140, 0, 0.6);

  /* Variables del Menú Lateral Fijas */
  --sidebar-bg-dark: #2c2c2c;
  --sidebar-text-color: #e0e0e0;
  --sidebar-hover-bg: #444;
  --sidebar-active-bg: #3a3a3a;
  --sidebar-separator-color: #555;
  --sidebar-accent-color: var(--section-accent-color);

}

/* --- TEMA VERDE (PRODUCTO) - Por defecto y para [data-theme="producto"] --- */
body, body[data-theme="producto"] {
  --section-gradient-start: #061704;
  --section-gradient-mid:   #2f8030;
  --section-gradient-end:   #07700c;
  --section-accent-color: #00ff8c;
  --section-accent-glowa: #0cbb2a;
	 --section-border-color:   #098518;
}

/* --- TEMA NARANJA (MARKETING) --- */
body[data-theme="marketing"] {
  --section-gradient-start: #331a00;
  --section-gradient-mid:   #e67e22;
  --section-gradient-end:   #331a00;
  --section-accent-color: #f39c12;
  --section-accent-glow: rgba(243, 156, 18, 0.7);
	--section-border-color: #ff5e00;
}

/* --- TEMA AZUL (MODELO DE NEGOCIO) --- */
body[data-theme="modelo"] {
  --section-gradient-start: #011f4b;
  --section-gradient-mid:   #2980b9;
  --section-gradient-end:   #011f4b;
  --section-accent-color: #80ccff;
  --section-accent-glow: rgba(52, 152, 219, 0.7);
	--section-border-color: #0075ad;
}

/* --- TEMA AMARILLO (EXPERIENCIA DE USUARIO) - Provisional --- */
body[data-theme="ux"] {
  --section-gradient-start: #3d2c00;
  --section-gradient-mid:   #f1c40f;
  --section-gradient-end:   #3d2c00;
  --section-accent-color: #f1c40f;
  --section-accent-glow: rgba(241, 196, 15, 0.7);
}

/* --- TEMA ROJO (INCERTIDUMBRES) - Provisional --- */
body[data-theme="retos"] {
  --section-gradient-start: #4c0000;
  --section-gradient-mid:   #c0392b;
  --section-gradient-end:   #4c0000;
  --section-accent-color: #e74c3c;
  --section-accent-glow: rgba(231, 76, 60, 0.7);
}


body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
  background: #FAFAFA;
  color: var(--text-dark);
}
 /* El offset se aplica cuando hacemos scrollIntoView(block: 'start') */
.journey-step .step-header {
  scroll-margin-top: var(--sticky-offset);
}

/* 2. HEADER Y STRINGBOOK DESPLEGABLE */
header {
  position: fixed; top: 0; left: 0; right: 0; height: var(--header-height);
  background: linear-gradient(90deg, var(--section-gradient-start), var(--section-gradient-mid), var(--section-gradient-end));
  color: var(--text-light); display: flex; align-items: center; justify-content: space-between;
  padding: 0 20px; box-sizing: border-box; z-index: 1000;
}
.header-content { display: flex; align-items: center; }
.header-text { display: flex; flex-direction: column; justify-content: center; }
.header-title { font-size: 1.6em; font-weight: 700; line-height: 1.1; }
.header-subtitle { font-size: 1.1em; font-style: italic; opacity: 0.85; }
.header-content img { height: 80px; margin-right: 12px; }
/* ===================================================
   NUEVOS ESTILOS PARA LOS BOTONES DEL HEADER
   =================================================== */

.header-buttons {
  position: absolute;
  right: 20px;
  bottom: 10px;
  display: flex;
  gap: 12px; /* Espacio entre botones */
}

/* Estilo unificado para botones y enlaces */
.header-action-button {
  display: inline-flex; /* Para alinear icono y texto */
  align-items: center;
  gap: 8px; /* Espacio entre icono y texto */
  padding: 8px 16px; /* Padding reducido */
  font-size: 0.9em;  /* Tamaño de fuente reducido */
  font-weight: 600;
  text-decoration: none;
  color: #FFFFFF;
  background-color: #1a1a1a;
  border: 1px solid rgba(255, 140, 0, 0.4); /* Borde sutil naranja */
  border-radius: 20px; /* Bordes redondeados */
  cursor: pointer;
  
  /* Glow inicial anaranjado */
  box-shadow: 0 0 10px rgba(255, 140, 0, 0.3);
  
  transition: all 0.3s ease;
}

.header-action-button:hover {
  background-color: #2a2a2a;
  color: var(--button-color);
  /* Glow intensificado */
  box-shadow: 0 0 20px rgba(255, 140, 0, 0.6);
  transform: translateY(-2px); /* <-- AÑADE ESTA LÍNEA */
}

/* Pequeño ajuste para que los iconos dentro de los botones también cambien de color al hacer hover */
.header-action-button:hover .fas {
    color: var(--button-color);
}

#route-container {
  position: fixed; top: var(--header-height); left: calc(var(--sidebar-width) + var(--sidebar-offset) * 2); right: 0;
  background: #FFFFFF; overflow: hidden; max-height: 0; border-bottom: 1px solid #DDD;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); transition: max-height 0.4s ease; z-index: 999;
}
#route-container.open { max-height: 320px; }
#route-container .route-content { padding: 20px; }
.route-node {
  border: 1px dashed #AAA; border-radius: 6px; padding: 10px 14px; margin: 6px;
  display: inline-block; background: #FDFDFD; font-size: 0.85em;
}

/* 4. MENÚ LATERAL (VERSIÓN FINAL Y CORRECTA) */
nav#sidebar {
  position: fixed; top: calc(var(--header-height) + var(--sidebar-offset)); left: var(--sidebar-offset);
  width: var(--sidebar-width); bottom: var(--sidebar-offset); overflow-y: auto;
  background: var(--sidebar-bg-dark); box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);
  padding: 15px; box-sizing: border-box; border-radius: 12px; padding-top: 7px;
}
nav#sidebar ul { list-style: none; padding: 0; margin: 0; }
nav#sidebar li { margin-bottom: 2px; }
.menu-item {
  display: flex; align-items: center; justify-content: space-between;
  padding: 5px;
  border-radius: var(--border-radius); cursor: pointer;
  transition: background-color 0.2s ease; color: var(--sidebar-text-color);
}
.menu-item:hover {
  background-color: var(--sidebar-active-bg); /* Mismo fondo que el item activo */
  color: var(--sidebar-accent-color);  /*Color de texto verde */
}

/* Pequeño ajuste para que el título también se ponga verde */
.menu-item:hover .section-title,
.menu-item:hover span a {
    color: var(--section-accent-color); 
}
.menu-item.active { background-color: var(--sidebar-active-bg); }
.menu-item.active .section-title { color: var(--section-accent-color); font-weight: 700; }
.menu-item span a, .menu-item .section-title {
  color: var(--sidebar-text-color); text-decoration: none;
  font-weight: 500; font-size: 0.95em;
  transition: color 0.2s ease;
}
.toggle { font-size: 1.1em; font-weight: bold; transition: transform 0.3s ease; }
.menu-item.active .toggle { transform: rotate(90deg); }
.submenu {
  max-height: 0; overflow: hidden; padding-left: 8px; margin-left: 8px;
  border-left: 1px solid var(--sidebar-separator-color);
  transition: max-height 0.4s ease-out;
}
.submenu.open { max-height: 600px; }
.submenu a {
  display: block; padding: 6px 10px;
  color: #b0b0b0; text-decoration: none;
  font-size: 0.85em; border-radius: 6px;
  transition: color 0.2s, background-color 0.2s;
}
/*.submenu a:hover { color: var(--sidebar-accent-color); background-color: var(--sidebar-hover-bg); }*/
.submenu a:hover { color: var(--section-accent-color); background-color: var(--sidebar-hover-bg); }


nav#sidebar a.visited::before, .menu-item .section-title.completed::before {
  content: '\2714\00a0';
  color: var(--section-accent-color);
}
/* Estilo para el enlace de la página actual (ahora incluye enlaces principales) */
.submenu a.current-page,
.menu-item a.current-page { /* <-- SELECTOR CORREGIDO Y AÑADIDO */
  color: var(--section-accent-color) !important;
  font-weight: 700;
}

/* El fondo solo se aplica si está en un submenú */
.submenu a.current-page {
  background-color: var(--sidebar-hover-bg);
}

/* El fondo se aplica al contenedor si es un enlace principal */
.menu-item:has(a.current-page) {
    background-color: var(--sidebar-active-bg);
}

/* Estilo para el enlace de la página actual 
.submenu a.current-page {
  color: var(--section-accent-color); 
  font-weight: 700;
  background-color: var(--sidebar-hover-bg);
}
*/
li.direct-link {
    margin-top: 10px; padding-top: 8px;
    border-top: 1px solid var(--sidebar-separator-color);
}
/* ===================================================
   NUEVO BOTÓN DE INICIO EN EL MENÚ LATERAL
   =================================================== */

/* Contenedor del botón para el espaciado y la línea separadora */
.home-button-container {
    margin-bottom: 15px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--sidebar-separator-color);
}

/* Estilos del propio botón */
.sidebar-home-button {
    display: block;
    text-decoration: none;
    text-align: center;
    padding: 12px 10px;
    font-weight: 700;
    font-size: 1em;
    color: #FFFFFF; /* Texto en blanco para destacar sobre el fondo negro */
    background-color: #1a1a1a; /* Fondo negro */
    border-radius: var(--border-radius);
    
    /* Glow inicial anaranjado (usando el color de los botones del header) */
    box-shadow: 0 0 15px rgba(255, 140, 0, 0.4);
    
    transition: all 0.3s ease;
}

/* Hover: fondo más claro, más glow y texto naranja */
.sidebar-home-button:hover {
    background-color: #2a2a2a; /* Fondo menos negro */
    color: var(--button-color); /* Texto anaranjado, como los botones del header */
    box-shadow: 0 0 25px rgba(255, 140, 0, 0.7); /* Glow más intenso */
}
/* ===================================================
   NUEVO ESTILO PARA SUBMENÚ ACTIVO
   =================================================== */

.submenu.open {
    background-color: var(--sidebar-active-bg); /* Mismo fondo que el item activo */
    border-radius: 0 0 var(--border-radius) var(--border-radius); /* Redondea solo las esquinas inferiores */
    margin-top: 5px;  /* Pequeño espacio para separarlo del item principal */
    padding-top: 10px;    /* Espacio interno superior */
    padding-bottom: 10px; /* Espacio interno inferior */
    margin-left: 0;   /* Reseteamos el margen para que ocupe todo el ancho */
    padding-left: 20px; /* Mantenemos la indentación de los enlaces */
    border: 1px solid rgba(0, 255, 140, 0.1); /* Borde muy sutil */

    /* Efecto "Glow" verdoso */
    /* box-shadow: 0 0 40px rgba(0, 255, 140, 0.50); */
	/* Un brillo más definido y con profundidad */
	box-shadow: 
		  inset 0 0 5px var(--section-accent-glow), /* CAMBIO AQUÍ */
		  0 0 40px var(--section-accent-glow);   /* CAMBIO AQUÍ */
}

/* Ajuste para que el borde izquierdo del submenú desaparezca cuando está abierto */
.submenu.open {
    border-left: none;
}

/* Ajuste para que el borde del item principal activo se una con el submenú */
.menu-item.active {
    border-radius: var(--border-radius) var(--border-radius) 0 0; /* Redondea solo las esquinas superiores */
}

/* 5. CONTENIDO PRINCIPAL Y COMPONENTES COMUNES */
main#content {
  margin-top: calc(var(--header-height) + var(--sidebar-offset));
  margin-left: calc(var(--sidebar-width) + var(--sidebar-offset) * 2);
  margin-right: 20px; padding: 20px 20px 40px 20px;
  box-sizing: border-box; max-width: 100%;
}
main#content h1 { font-size: 2.2em; margin-top: 0; margin-bottom: 20px; }
main#content h2 { font-size: 1.8em; margin-top: 40px; margin-bottom: 15px; border-bottom: 2px solid #eee; padding-bottom: 5px;}
main#content h3 { font-size: 1.4em; margin-top: 30px; margin-bottom: 10px; color: var(--section-gradient-mid);}
main#content p { line-height: 1.6; margin-bottom: 16px; }

.callout {
  background: var(--callout-bg);
  border-left: 4px solid var(--callout-border);
  padding: 15px 20px; margin: 20px 0; border-radius: var(--border-radius);
}
.callout h3 { margin-top: 0; margin-bottom: 10px; font-size: 1.4em; }
.content-breadcrumbs { font-size: 0.9em; color: #666; margin-bottom: 10px; }

/* 6. TARJETAS DE ACCESO GENERALES */

/* ===================================================
   6. TARJETAS DE ACCESO (CON TOOLTIPS CORREGIDOS)
   =================================================== */

.cards-wrapper {
  margin-top: 28px; background: linear-gradient(180deg, #252525, #1b1b1b);
  padding: 22px; border-radius: 14px; box-shadow: 0 6px 18px rgba(0, 0, 0, .18); color: #eee
}
.cards-head {
  background: linear-gradient(135deg, rgba(0, 255, 140, .06), rgba(0, 180, 120, .03));
  border: 1px solid rgba(0, 255, 140, .18); padding: 14px 16px; border-radius: 12px;
  margin-bottom: 16px; box-shadow: inset 0 0 20px rgba(0, 255, 140, .06);
}
.cards-head h2 { margin: 0 0 6px 0; color: #eafff4; border: none; padding: 0; }
.cards-head p.intro { margin: 0; color: #cfeee4 }
.card-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px }

/*
 * AJUSTE CLAVE 1:
 * El contenedor <article> ahora SÓLO se encarga de la posición.
 * Le quitamos todos los estilos visuales y el `overflow: hidden`.
 */
.card {
  position: relative; /* <-- ESTO ES LO MÁS IMPORTANTE QUE SE QUEDA */
}

/*
 * AJUSTE CLAVE 2:
 * Movemos TODOS los estilos visuales (fondo, borde, overflow)
 * a la etiqueta <a> que está dentro.
 */
.card a {
  display: block;
  background: #2f2f2f;
  border: 1px solid #3f3f3f;
  border-radius: 12px;
  overflow: hidden; /* <-- El overflow ahora está aquí, afectando solo a la imagen. */
  transition: transform .2s ease, box-shadow .25s ease, border-color .25s ease;
  box-shadow: 0 8px 22px rgba(0, 0, 0, .35);
  color: #fff;
  text-decoration: none;
}
.card:hover a { /* El hover ahora se aplica al <a> también */
  transform: translateY(-2px);
  box-shadow: 0 0 0 2px rgba(0, 255, 140, .25), 0 12px 28px rgba(0, 255, 140, .25);
  border-color: rgba(0, 255, 140, .4)
}

.card img { width: 100%; height: 160px; object-fit: cover }
.card-body { padding: 12px 14px }
.card-title { font-weight: 700; margin: 0 0 6px }
.card-desc { font-size: .95em; color: #e7e7e7; margin: 0 }

/*
 * AJUSTE CLAVE 3:
 * Cambiamos la posición del tooltip para que aparezca a la derecha.
 * Ahora SÍ puede "salirse" porque su padre (.card) ya no tiene overflow:hidden.
 */
.tooltip {
  position: absolute;
  left: 15%; /* Lo colocamos justo al borde derecho de la tarjeta */
  top: 15px;   /* Lo bajamos un poco desde la parte superior */
  margin-left: 15px; /* Le damos un espacio para que no esté pegado */
  
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transform: translateX(-10px); /* Efecto de entrada desde la izquierda */
  transition: opacity .2s ease, visibility .2s ease, transform .2s ease;

  background: rgba(18, 18, 18, .98); color: #e9ffe8; border: 1px solid rgba(0, 255, 140, .35);
  border-radius: 12px; box-shadow: 0 18px 40px rgba(0, 0, 0, .45), 0 0 0 1px rgba(0, 255, 140, .12) inset;
  padding: 12px 14px; width: 300px; max-width: 85vw; z-index: 50;
}
.card:hover .tooltip {
  opacity: 1;
  visibility: visible;
  transform: translateX(0); /* Lo movemos a su posición final */
}
.tooltip h4 { margin: 0 0 6px 0; font-size: .95em; color: #afffcb }
.tooltip ul { margin: 0; padding-left: 18px; font-size: .9em; line-height: 1.4 }

/* AJUSTE CLAVE 4: La flecha del tooltip ahora apunta a la izquierda */
.tooltip::after {
  content: '';
  position: absolute;
  top: 15px; /* Alineado verticalmente con el tooltip */
  left: -16px; /* Lo colocamos fuera, a la izquierda */
  border: 8px solid transparent;
  border-right-color: rgba(18, 18, 18, .98); /* La flecha apunta a la derecha */
}

@media (max-width: 1024px) { .card-grid { grid-template-columns: repeat(2, 1fr) } }
@media (max-width: 720px) { .card-grid { grid-template-columns: 1fr } }



/* ===================================================
   ESTILO CORREGIDO PARA IMÁGENES DE APOYO
   =================================================== */

.image-full-width {
  display: block; /* Necesario para que el centrado con margin:auto funcione */
  width: 100%; /* La imagen será responsive y ocupará el ancho disponible */
  max-width: 800px; /* PERO nunca superará los 600px de ancho */
  height: auto; /* Mantiene la proporción de la imagen */
  margin: 30px auto; /* Centra la imagen horizontalmente y le da espacio vertical */
  border-radius: var(--border-radius); /* Mantiene los bordes redondeados consistentes */
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.12); /* Sombra sutil para darle profundidad y realce */
  
  
  /* === LÍNEAS AÑADIDAS PARA LA INTERACCIÓN === */
  cursor: zoom-in; /* El cursor cambia para indicar que se puede hacer clic */
  transition: opacity 0.2s ease; /* Transición suave para el hover */
}

/* ====================================================================
   7. FOOTER (DISEÑO CORREGIDO CON FLEXBOX PARA UN AJUSTE PERFECTO)
   ==================================================================== */

footer {
  margin-left: calc(var(--sidebar-width) + var(--sidebar-offset) * 2);
  background: #2c2c2c;
  color: #e0e0e0;
  padding: 50px 40px 30px 40px;
  border-top: 4px solid var(--sidebar-accent-color);
  position: relative;
  z-index: 10;
}

/* Usamos Flexbox para un control preciso del ancho */
.footer-grid {
    display: flex;
    flex-wrap: wrap; /* Para responsive */
    gap: 40px; /* Espacio entre columnas */
    margin-bottom: 40px;
}

/* Columna Izquierda: Mensaje y Contacto */
.footer-contact {
    flex: 1; /* Ocupa una fracción del espacio */
    min-width: 350px; /* Ancho mínimo antes de apilarse */
}
.footer-contact h3 {
    font-size: 1.8em;
    color: #fff;
    margin-top: 0;
    margin-bottom: 10px;
}
.footer-contact p {
    font-size: 1.1em;
    line-height: 1.7;
    color: #c0c0c0;
    margin-bottom: 25px;
}
.contact-details {
    list-style: none;
    padding: 0;
    margin: 0;
}
.contact-details li {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 15px;
    font-size: 1em;
}
.contact-details .fas, .contact-details .fab {
    color: var(--sidebar-accent-color);
    width: 20px;
    text-align: center;
}
.contact-details a {
    color: #e0e0e0;
    text-decoration: none;
    transition: color 0.2s ease;
}
.contact-details a:hover {
    color: var(--sidebar-accent-color);
}

/* Columna Derecha: Formulario Tally */
.footer-form {
    flex: 1.5; /* Hacemos esta columna un 50% más ancha que la otra */
    min-width: 400px; /* Ancho mínimo antes de apilarse */
}
.footer-form h3 {
    font-size: 1.5em;
    color: #fff;
    margin-top: 0;
    margin-bottom: 15px;
}

/* Contenedor del Iframe (LA CLAVE ESTÁ AQUÍ) */
.tally-form-container {
    height: 500px; /* Altura exacta de tu iframe */
    width: 100%; /* Ocupa el 100% de su columna (que ahora es más ancha) */
    border-radius: var(--border-radius);
    overflow: hidden; /* Oculta cualquier borde o scrollbar del iframe */
}
.tally-form-container iframe {
    width: 100%;
    height: 100%;
    border: none;
}

/* Parte Inferior del Footer: Créditos y Legal */
.footer-bottom {
    margin-top: 40px;
    padding-top: 20px;
    border-top: 1px solid #555;
    font-size: 0.85em;
    color: #a0a0a0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap; /* Para responsive */
}
.footer-credits {
    max-width: 60%;
}
.footer-legal {
    text-align: right;
}
.footer-legal img {
    max-width: 120px;
    opacity: 0.7;
}

/* Media Query para apilar columnas y centrar contenido en móvil */
@media (max-width: 1100px) {
    footer { padding-right: 40px; }
    .footer-credits { max-width: 100%; }
    .footer-bottom {
        flex-direction: column;
        gap: 20px;
        text-align: center;
    }
    .footer-legal {
        text-align: center;
    }
}



/* Estilo para el iframe de Tally */
.tally-form-container iframe {
    width: 100%;
    height: 100%;
    border: none;
}

.footer-bottom {
    margin-top: 40px;
    padding-top: 20px;
    border-top: 1px solid #555;
    font-size: 0.85em;
    color: #a0a0a0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.footer-credits {
    max-width: 60%;
}
.footer-legal img {
    max-width: 120px;
    opacity: 0.7;
}

@media (max-width: 1100px) {
    footer {
        padding-right: 40px;
    }
    .footer-grid {
        grid-template-columns: 1fr;
    }
    .footer-bottom {
        flex-direction: column;
        gap: 20px;
        text-align: center;
    }
    .footer-credits {
        max-width: 100%;
    }
}
/* ====================================================================
   BLOQUE "SIGUIENTE SECCIÓN" (VERSIÓN FINAL CORREGIDA Y CON VARIABLES)
   ==================================================================== */

/* Contenedor principal que crea la caja oscura */
.next-section-wrapper {
    margin: 50px 0;
    padding: 25px 30px;
    background: #2b2b2b;
    color: #fff;
    border-radius: 14px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.25);
    border: 1px solid #444;
}

/* El div que contiene las dos columnas (texto y tarjeta) */
.next-section-promo {
    display: flex;
    flex-wrap: wrap;
    gap: 30px;
    align-items: flex-start;
}

/* Columna izquierda con todo el texto */
.next-section-text {
    flex: 2;
    min-width: 300px;
}

/* Título superior "En la siguiente sección..." */
.next-section-wrapper .next-section-title {
    margin: 0 0 20px 0;
    padding-bottom: 8px;
    font-size: 20px !important;
    font-weight: 400;
    color: #a0a0a0;
    text-transform: none;
    letter-spacing: 0.5px;
    border: none;
    border-bottom: 1px solid #666; /* Línea gris sutil, como en la imagen */
}


/* Título principal de la siguiente sección */
.next-section-promo .next-section-main-title {
    margin: 0 0 15px 0;
    padding-bottom: 10px;
    font-size: 1.8em;
    border: none !important;
    /* border-bottom: 0px solid #666;  Línea gris sutil, como en la imagen */
    color: var(--section-accent-color); /* <-- Usa la variable de color de la sección */
}

/* Descripción con borde izquierdo */
.next-section-promo blockquote {
    margin: 0;
    padding-left: 15px;
    border-left: 2px solid var(--section-accent-color); /* <-- Usa la variable de color */
    font-size: 1.05em;
    line-height: 1.6;
    color: #d0d0d0;
}

/* Tarjeta de la derecha con borde y glow */
.next-section-card {
    flex: 1;
    max-width: 250px;
    text-decoration: none;
    border-radius: 12px;
    overflow: hidden;
    text-align: center;
    display: block;
    border: 2px solid var(--section-accent-color); /* <-- Usa la variable de color */
    transition: transform 0.2s ease, box-shadow 0.3s ease;
    box-shadow: 0 0 20px var(--section-accent-glow); /* <-- Usa la variable de glow */
}

.next-section-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 0 35px var(--section-accent-glow); /* <-- Usa la variable de glow */
}

.next-section-card img {
    width: 100%;
    height: auto;
    display: block;
}

/* H3 de la tarjeta: ahora es un bloque con fondo */
.next-section-card h3 {
    margin: 0;
    padding: 15px 10px;
    font-size: 1.1em;
    font-weight: 600;
    background-color: rgba(20, 20, 20, 0.7);
    color: #FFFFFF !important;
    transition: color 0.3s ease;
}

/* Hover para el H3 */
.next-section-card:hover h3 {
    color: var(--section-accent-color); /* <-- Usa la variable de color */
}

/* Media Query para apilar las columnas en pantallas pequeñas */
@media (max-width: 900px) {
    .next-section-promo { 
        flex-direction: column; 
    }
    .next-section-card {
        max-width: 100%;
    }
}


/* ====================================================================
   ESTILOS PARA LA CAJA DE LUZ (LIGHTBOX)
   ==================================================================== */

/* Contenedor principal de la caja de luz (oculto por defecto) */
.lightbox {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.85); /* Fondo negro semitransparente */
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2000; /* Siempre por encima de todo */
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
    padding: 20px;
    box-sizing: border-box;
}

/* Clase para mostrar la caja de luz */
.lightbox.active {
    opacity: 1;
    visibility: visible;
}

/* La imagen ampliada dentro de la caja de luz */
.lightbox img {
    max-width: 95vw;  /* Ocupa como máximo el 90% del ancho de la pantalla */
    max-height: 90vh; /* Ocupa como máximo el 80% del alto de la pantalla */
    display: block;
    box-shadow: 0 0 40px rgba(0, 255, 140, 0.5); /* Un brillo verdoso para que destaque */
    border-radius: var(--border-radius);
    transition: transform 0.3s ease;
}
.lightbox.active img {
    transform: scale(1); /* Efecto de zoom al aparecer */
}

/* Botón para cerrar la caja de luz */
.lightbox-close {
    position: absolute;
    top: 20px;
    right: 30px;
    font-size: 2.5em;
    color: white;
    cursor: pointer;
    transition: transform 0.2s ease;
}
.lightbox-close:hover {
    transform: scale(1.2);
}

/* Las imágenes en el contenido que activarán la caja de luz */
.lightbox-trigger {
    cursor: zoom-in; /* Cambia el cursor para indicar que se puede hacer clic */
    transition: opacity 0.2s ease;
}
.image-full-width:hover {
    opacity: 0.85; /* Un pequeño efecto visual al pasar el ratón */
}

/* Separador sutil bajo el menú */
.sidebar-divider{
  height:1px;
  margin:10px 12px 12px;
  background: linear-gradient(90deg, transparent, rgba(24,195,126,.35), transparent);
  opacity:.8;
  margin-top: 5px;
  margin-bottom: 5px;
}

/* Botón CTA bajo el menú */
.sidebar-cta{
  display:block;
  margin:0 12px 14px;
  padding:12px 14px;
  border-radius:14px;
  text-align:center;
  font-weight:700;
  text-decoration:none;
  
      margin-top: 10px;
}

.sidebar-cta i{ margin-right:8px; }

/* === Sidebar CTA: usa variables de tema === */
.sidebar-cta{
  color: var(--text-light);
  background:
    radial-gradient(120% 120% at 50% -20%,
      color-mix(in srgb, var(--section-accent-color) 22%, transparent),
      color-mix(in srgb, var(--section-accent-color) 10%, transparent)),
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border: 1px solid color-mix(in srgb, var(--section-accent-color) 70%, transparent);
  box-shadow:
    0 8px 22px color-mix(in srgb, var(--section-accent-glow) 60%, transparent),
    inset 0 0 0 1px color-mix(in srgb, var(--section-accent-color) 15%, transparent);
}
.sidebar-cta:hover{
  transform: translateY(-1px);
  box-shadow:
    0 12px 30px color-mix(in srgb, var(--section-accent-glow) 80%, transparent),
    inset 0 0 0 1px color-mix(in srgb, var(--section-accent-color) 25%, transparent);
  border-color: color-mix(in srgb, var(--section-accent-color) 90%, transparent);
}
.sidebar-cta i{ margin-right:8px; }

/* === Callout temático (hereda del tema activo) === */
.callout{
  /* usa el acento del tema como color base */
  --_accent: var(--section-accent-color);

  /* fondo suave que funciona en claro/oscuro */
  background:
    linear-gradient(0deg,
      color-mix(in srgb, var(--_accent) 18%, transparent),
      color-mix(in srgb, var(--_accent) 8%, transparent));
 border: 1px solid var(--section-border-color);
  border-left: 4px solid color-mix(in srgb, var(--section-border-color) 75%, transparent);

  /* ligero glow con la variable del tema */
  box-shadow: 0 10px 28px color-mix(in srgb, var(--section-accent-glow, rgba(0,0,0,.2)) 40%, transparent);

  padding: 15px 20px;
  margin: 20px 0;
  border-radius: var(--border-radius);
}

/* Fallback para navegadores sin color-mix */
@supports not (color: color-mix(in srgb, white, black)) {
  .callout{
    background: rgba(0,0,0,.06);
    border-left-color: var(--section-accent-color);
    box-shadow: 0 10px 28px var(--section-accent-glow, rgba(0,0,0,.18));
  }
}

/* === Bloque final CTA (temático) === */
.final-cta{
  position: relative;
  margin: 26px 0;
  padding: clamp(28px, 5vw, 56px) clamp(18px, 4vw, 40px);
  border-radius: 18px;
  color: #eafff4;
  background:
    radial-gradient(900px 400px at 85% -20%,
      color-mix(in srgb, var(--section-accent-color) 18%, transparent), transparent 60%),
    linear-gradient(135deg,
      var(--section-gradient-start, #0e1311),
      var(--section-gradient-end, #0a1f15));
  border: 1px solid color-mix(in srgb, var(--section-accent-color) 36%, transparent);
  box-shadow: 0 18px 48px color-mix(in srgb, var(--section-accent-glow, rgba(0,0,0,.3)) 70%, transparent);
  overflow: hidden;
}
.final-cta__inner{ max-width: 980px; margin: 0 auto; text-align: center; }
.final-cta h2{ margin: 0 0 6px; line-height: 1.1; font-size: clamp(22px, 3.4vw, 40px); }
.final-cta__lead{ margin: 0 0 16px; opacity: .9; font-size: clamp(15px, 1.5vw, 18px); }

/* Botón */
.cta-link{
  display: inline-flex; align-items: center; justify-content: center;
  gap: 10px; padding: 12px 18px; border-radius: 14px; font-weight: 700;
  text-decoration: none; color: #0b1a13; /* texto oscuro para contraste */
  background:
    linear-gradient(180deg,
      color-mix(in srgb, var(--section-accent-color) 92%, white 8%),
      color-mix(in srgb, var(--section-accent-color) 78%, black 22%));
  border: 1px solid color-mix(in srgb, var(--section-accent-color) 70%, transparent);
  box-shadow:
    0 10px 26px color-mix(in srgb, var(--section-accent-glow, rgba(0,0,0,.25)) 60%, transparent),
    inset 0 0 0 1px color-mix(in srgb, #ffffff 30%, transparent);
  transition: transform .15s ease, box-shadow .15s ease, filter .15s ease;
}
.cta-link:hover{
  transform: translateY(-1px);
  box-shadow:
    0 14px 34px color-mix(in srgb, var(--section-accent-glow, rgba(0,0,0,.25)) 80%, transparent),
    inset 0 0 0 1px color-mix(in srgb, #ffffff 46%, transparent);
  filter: saturate(1.05);
}

/* Fallback si no hay color-mix */
@supports not (color: color-mix(in srgb, white, black)) {
  .final-cta{
    background: linear-gradient(135deg, #0e1311, #0a1f15);
    border-color: var(--section-accent-color);
    box-shadow: 0 18px 48px var(--section-accent-glow, rgba(0,0,0,.35));
  }
  .cta-link{
    background: var(--section-accent-color);
    border-color: var(--section-accent-color);
    color: #07120d;
  }
}
.mystery-card {
  position: absolute;
  top: 20px; right: 20px;
  background: rgba(255,140,0,0.15);
  border: 1px solid rgba(255,140,0,0.35);
  color: #ffa94d;
  padding: 14px 18px;
  border-radius: 12px;
  font-weight: 600;
  font-size: 15px;
  line-height: 1.3;
  cursor: pointer;
  box-shadow: 0 0 15px rgba(255,140,0,0.5);
  transition: transform .2s ease, box-shadow .2s ease;
}
.mystery-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 0 25px rgba(255,140,0,0.8);
}
.mystery-card .mystery-text { display:block; text-align:right; }

/* --- Apariencia del término clicable (marco punteado verde + iconos al final) --- */

/* ====== Nota inline sin romper el flujo ====== */
.sb-note{
  display: inline;                          /* se mantiene en la misma línea */
  border: 2px dotted var(--sb-accent, #18c37e);
  border-radius: 8px;
  padding: 0 .35em;                         /* margen lateral suave */
  background: rgba(24,195,126,0.10);
  cursor: pointer;
  /* hace que el borde y fondo se apliquen a cada línea si hay salto */
  -webkit-box-decoration-break: clone;
  box-decoration-break: clone;
  transition: background .15s ease, box-shadow .15s ease, border-color .15s ease;
}
.sb-note:hover{
  background: rgba(24,195,126,0.15);
  border-color: #20d08b;
  box-shadow: 0 0 0 2px rgba(24,195,126,0.12) inset;
}

/* sin etiquetas ni pseudo-iconos automáticos */
.sb-note::before, .sb-note::after{ content:none !important; }

/* Iconos manuales: tamaño y alineación sutil */
.sb-ico, .sb-ico-hand{
  font-size: .95em; 
  vertical-align: -0.1em; 
  opacity: .9;
}
.sb-ico{ color: #ffd27a; }            /* el icono “representativo” */
.sb-ico-hand{ color: #ed9032; }       /* la mano cursor */
.sb-note:hover .sb-ico, .sb-note:hover .sb-ico-hand{ opacity: 1; }


/* Alternativas según tipo */
.sb-note[data-sb-type="glossary"]::before{ content: "💡"; color:#9AF0C2; }
.sb-note[data-sb-type="debate"]::before{ content: "💬"; color:#ffaeae; }
.sb-note[data-sb-type="key"]::before{ content: "★"; color:#ffd27a; }

/* ====== Modal (sb-*) ====== */
.sb-overlay{
  position: fixed; inset: 0; background: rgba(0,0,0,.65);
  opacity: 0; pointer-events: none; transition: opacity .2s ease;
  z-index: 9800;
}
/* --- Modal centrado con altura automática y límite máximo --- */
.sb-dialog{
  position: fixed;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%); /* centra siempre */
  width: min(680px, 92vw);
  max-height: 80vh;                 /* limita altura si el contenido es largo */
  overflow: auto;                    /* scroll interno si se excede */
  background: #0f1216;
  color: #e9ecef;
  border: 1px solid #2a2f36;
  border-radius: 14px;
  box-shadow: 0 10px 40px rgba(0,0,0,.6);
  padding: 1.2rem 1.2rem 1rem;
  opacity: 0; pointer-events: none;
  transition: .2s ease;             /* mantiene las transiciones */
  z-index: 9810;
}

/* Estados abiertos (se mantienen) */
.sb-dialog.is-open, .sb-overlay.is-open{ opacity: 1; pointer-events: auto; }


.sb-close{
  position:absolute; top:.5rem; right:.6rem; background:transparent; border:0;
  color:#9fb3c8; font-size:1.4rem; cursor:pointer;
}
.sb-dialog-type{
  font-size:.9rem; opacity:.9; margin-bottom:.25rem; color:#ffb35a;
}
.sb-dialog-title{
  margin: .1rem 0 .6rem;
  font-size: 1.12rem;
  color: #ffe8cc;
  text-shadow: 0 0 8px rgba(255,140,0,.18);
}
.sb-dialog-content{ font-size:.96rem; line-height:1.5; opacity:.95; }
/* ====== Variante DISCUSIÓN (rojizo) ====== */
.sb-note[data-sb-type="debate"] {
  border-color: #ff6b6b;
  background: rgba(255,107,107,.10);
}
.sb-note[data-sb-type="debate"]:hover {
  background: rgba(255,107,107,.16);
  box-shadow: 0 0 0 2px rgba(255,107,107,.12) inset;
  border-color: #ff8585;
}
.sb-note[data-sb-type="debate"] .sb-ico { 
  color:#f63d3d; 
}

/* Variante ACLARACIÓN / INFORMATIVO (azulado) */
.sb-note[data-sb-type="info"]{
  border-color:#4dabf7;
  background: rgba(77,171,247,.10);
}
.sb-note[data-sb-type="info"]:hover{
  background: rgba(77,171,247,.16);
  box-shadow: 0 0 0 2px rgba(77,171,247,.12) inset;
  border-color:#74c0fc;
}
.sb-note[data-sb-type="info"] .sb-ico{ color:#4dabf7; }
/* Caja para ejemplos de los Nudos */
.nudo-example-box {
background-color: #333;
    color: #f1f1f1;
    padding: 20px;
    border-radius: var(--border-radius);
    margin: 2px 0;
    font-family: 'Courier New', Courier, monospace;
    line-height: 1;
    border: 1px solid #555;
    white-space: pre-wrap;
	    padding-top: 2px;
    padding-bottom: 2px;
}


/* =================================================================
   MODELO DE NEGOCIO · ESTILOS ESTANDARIZADOS (desde intro-modelo.html)
   Scopeado para no interferir con otros temas/secciones
   ================================================================= */

/* =========================
   TEMA: MODELO DE NEGOCIO
   (variables activas solo con body[data-theme="modelo"])
   ========================= */
body[data-theme="modelo"] {
  --mn-bg: #f3f4f6;          /* gris claro del fondo de la sección */
  --mn-text: #1f2937;        /* gris muy oscuro para texto */
  --mn-muted: #4b5563;       /* texto secundario */
  --mn-accent: #ff7e2f;      /* acento (naranja Selbook) */
  --mn-accent-weak: rgba(255,126,47,.15);
  --mn-surface: #ffffff;     /* tarjetas claras */
  --mn-surface-dark: #14161a;/* tarjetas oscuras de énfasis */
  --mn-border: #e5e7eb;      /* bordes suaves */
  --mn-shadow: 0 10px 28px rgba(0,0,0,.08);
}

/* contenedor principal opcional usado en alguna página inicial */
body[data-theme="modelo"] .main-section.modelo-main {
  background: var(--mn-bg);
  color: var(--mn-text);
  border-radius: 14px;
  /*padding: clamp(20px, 3vw, 36px);*/
  box-shadow: var(--mn-shadow);
}

/* ===== Cabecera y títulos con banda destacada (scopeado al bloque del modelo) ===== */
body[data-theme="modelo"] #modelo-negocio .section-header.band {
  background: linear-gradient(90deg, #fff, #fff0);
  border: 1px solid var(--mn-border);
  border-left: 6px solid var(--mn-accent);
  border-radius: 12px;
  padding: 18px 20px;
  margin-bottom: 20px;
}
body[data-theme="modelo"] #modelo-negocio .section-header .kicker {
  margin:.4rem 0 0; color: var(--mn-muted);
}

/* Nota: esta “banda” existe también como variante local más abajo;
   aquí mantenemos el color de fondo #4d5a7c tal como venía en la página */
body[data-theme="modelo"] #modelo-negocio .block-title.band {
  background: #4d5a7c;
  border: 1px solid var(--mn-border);
  border-left: 5px solid var(--mn-accent);
  border-radius: 10px;
  padding: 10px 12px;
  margin: 0 0 12px 0;
  font-weight: 800;
}

/* ===== Layout principal alternativo (si se usa .modelo-grid) ===== */
body[data-theme="modelo"] #modelo-negocio .modelo-grid {
  display: grid;
  grid-template-columns: minmax(0,1fr) 280px; /* lateral estrecho */
  gap: clamp(16px, 2.5vw, 28px);
}
body[data-theme="modelo"] #modelo-negocio .modelo-content .block {
  background: var(--mn-surface);
  border: 1px solid var(--mn-border);
  border-radius: 12px;
  padding: clamp(14px, 2vw, 20px);
}
body[data-theme="modelo"] #modelo-negocio .modelo-content .block + .block {
  margin-top: 14px;
}

/* ===== Columnas reutilizables (publicidad y suscripciones) ===== */
body[data-theme="modelo"] #modelo-negocio .cols { display: grid; }
body[data-theme="modelo"] #modelo-negocio .cols.gap-md { gap: 16px; }
body[data-theme="modelo"] #modelo-negocio .cols.cols-2 { grid-template-columns: repeat(2, minmax(0,1fr)); }
@media (max-width: 900px) {
  body[data-theme="modelo"] #modelo-negocio .modelo-grid { grid-template-columns: 1fr; }
  body[data-theme="modelo"] #modelo-negocio .cols.cols-2 { grid-template-columns: 1fr; }
}

/* ===== Tarjetas internas del modelo (scope para no afectar a .card global) ===== */
body[data-theme="modelo"] #modelo-negocio .card {
  border-radius: 12px;
  border: 1px solid var(--mn-border);
  box-shadow: var(--mn-shadow);
  padding: 14px 16px;
  background: var(--mn-surface);
}
body[data-theme="modelo"] #modelo-negocio .card.info {
  background: linear-gradient(180deg, #fff, #eae8e8);
  border-left: 4px solid var(--mn-accent);
}
body[data-theme="modelo"] #modelo-negocio .card.surface {
  background: #e9e9e9;
  margin-bottom: 7px;
}
body[data-theme="modelo"] #modelo-negocio .card.note {
  background: var(--mn-surface-dark);
  color: #e9edf3;
  border-color: #1d2127;
}
body[data-theme="modelo"] #modelo-negocio .card.note a { color: #9ad0ff; }

/* ===== Lateral de imágenes pequeñas (lightbox-ready) ===== */
body[data-theme="modelo"] #modelo-negocio .side-media .thumb {
  background: #fff;
  border: 1px solid var(--mn-border);
  border-radius: 12px;
  padding: 10px;
  box-shadow: var(--mn-shadow);
}
body[data-theme="modelo"] #modelo-negocio .side-media .thumb + .thumb { margin-top: 14px; }
body[data-theme="modelo"] #modelo-negocio .side-media img {
  width: 100%; height: auto; border-radius: 8px;
}
body[data-theme="modelo"] #modelo-negocio .side-media figcaption {
  margin-top: 6px; font-size: .92rem; color: var(--mn-muted);
}
body[data-theme="modelo"] #modelo-negocio .lightbox-trigger { cursor: zoom-in; }

/* ===== Listas, texto y enlaces ===== */
body[data-theme="modelo"] #modelo-negocio .modelo-content p { line-height: 1.6; }
body[data-theme="modelo"] #modelo-negocio .modelo-content ul { margin: .5rem 0 .9rem 1.1rem; }
body[data-theme="modelo"] #modelo-negocio a.cta-link,
body[data-theme="modelo"] #modelo-negocio .sb-note {
  display: inline-flex; align-items: center; gap: .4rem;
  padding: .2rem .55rem; border-radius: 999px;
  background: var(--mn-accent-weak);
  border: 1px dashed var(--mn-border);
  text-decoration: none; color: var(--mn-text);
}
body[data-theme="modelo"] #modelo-negocio .sb-note .sb-ico { font-size: .95em; }

/* ===== Checklist del resumen ===== */
body[data-theme="modelo"] #modelo-negocio .checklist {
  display: grid; gap: .5rem; margin: .6rem 0 0 0;
}
body[data-theme="modelo"] #modelo-negocio .checklist li {
  position: relative; padding-left: 28px;
}
body[data-theme="modelo"] #modelo-negocio .checklist li::before {
  content: "✔"; position: absolute; left: 0; top: 0;
  width: 20px; height: 20px; display: grid; place-items: center;
  border-radius: 6px; border: 1px solid var(--mn-border);
  background: #fff; color: var(--mn-accent);
}

/* ===== Pequeñas utilidades ===== */
body[data-theme="modelo"] #modelo-negocio .legend { color: var(--mn-muted); font-size: .95rem; }


/* ==============================
   AJUSTES LOCALES (desde intro-modelo.html)
   ============================== */

/* 1) Caja blanca con borde + sombra sutil para cada sección */
body[data-theme="modelo"] #modelo-negocio .block {
  background: #fff;
  border: 1px solid #e9ecf1;
  border-radius: 12px;
  box-shadow: 0 8px 22px rgba(0,0,0,.06);
  padding: clamp(16px, 2.2vw, 22px);
  margin: 16px 0;
}
body[data-theme="modelo"] #modelo-negocio .block + .block { margin-top: 18px; }

/* 2) H2 dentro de bloques: gris claro y sin subrayado global h2 */
body[data-theme="modelo"] #modelo-negocio .block .block-title {
  color: #e1ebfb;                 /* gris claro para el título (tal cual) */
  border-bottom: none !important; /* anula el borde de main#content h2 global */
  margin-top: 0;
  margin-bottom: 12px;
  font-weight: 800;
  line-height: 1.2;
}
/* Variante “banda” local (tal como está en la página) */
body[data-theme="modelo"] #modelo-negocio .block .block-title.band {
  background: #4b5f83;
  border: 1px solid #edf0f4;
  border-left: 5px solid var(--section-accent-color, #3498db);
  border-radius: 8px;
  padding: 10px 12px;
}

/* 3) Más aire y tamaño ligeramente mayor en texto y listas */
body[data-theme="modelo"] #modelo-negocio p { 
  line-height: 1.75; 
  margin-bottom: 16px; 
}
body[data-theme="modelo"] #modelo-negocio > section ul,
body[data-theme="modelo"] #modelo-negocio .block > ul {
  margin: 10px 0 16px 1.2rem;
}
body[data-theme="modelo"] #modelo-negocio > section ul > li,
body[data-theme="modelo"] #modelo-negocio .block > ul > li {
  margin-bottom: 10px; 
  font-size: 1.05em;
  line-height: 1.7;
}
body[data-theme="modelo"] #modelo-negocio ul ul {
  margin-top: 6px;
}
body[data-theme="modelo"] #modelo-negocio ul ul li {
  margin-bottom: 8px;
  font-size: 1em;
}

/* Jerarquía H3/H4 */
body[data-theme="modelo"] #modelo-negocio h3 { 
  margin: 18px 0 10px; 
  color: #2f3b48; 
}
body[data-theme="modelo"] #modelo-negocio h4 { 
  margin: 14px 0 8px; 
  color: #354252;
}

/* 4) Chips / “Contenidos relacionados” y notas */
body[data-theme="modelo"] #modelo-negocio .cta-link,
body[data-theme="modelo"] #modelo-negocio .sb-note {
  display: inline-flex;
  align-items: center;
  gap: .45rem;
  padding: .36rem .7rem;
  font-size: 1.02em;
  border-radius: 999px;
  margin: .25rem 0 .6rem;
}

/* 5) Tarjetas (suscripciones/publicidad) */
body[data-theme="modelo"] #modelo-negocio .card {
  box-shadow: 0 10px 24px rgba(0,0,0,.06);
  border: 1px solid #e9ecf1;
  border-radius: 12px;
}
body[data-theme="modelo"] #modelo-negocio .card h4,
body[data-theme="modelo"] #modelo-negocio .card h3 {
  margin-top: 0;
  margin-bottom: 10px;
}
body[data-theme="modelo"] #modelo-negocio .card ul { 
  margin-left: 1.1rem; 
}
body[data-theme="modelo"] #modelo-negocio .card ul > li { 
  margin-bottom: 9px; 
  line-height: 1.7; 
}

/* 6) Checklist del resumen */
body[data-theme="modelo"] #modelo-negocio .checklist li { 
  margin-bottom: 8px; 
}

/* 7) Utilidad: limpiar flotados */
body[data-theme="modelo"] #modelo-negocio .clear { clear: both; }


/* ==========================================================
   SELBOOK · MODAL REUTILIZABLE (Sección: Modelo de Negocio)
   Scope: solo cuando el tema activo es "modelo"
   ========================================================== */
body[data-theme="modelo"].sb-modal-open { overflow: hidden; }

/* Contenedor raíz del modal */
body[data-theme="modelo"] .sb-modal {
  position: fixed;
  inset: 0;
  display: none;           /* se muestra vía .is-open */
  z-index: 1200;           /* por encima de tooltips/lightbox */
}
body[data-theme="modelo"] .sb-modal.is-open { display: block; }

/* Capa oscura */
body[data-theme="modelo"] .sb-modal__overlay {
  position: absolute;
  inset: 0;
  background: rgba(12, 17, 27, 0.68); /* oscurece pantalla */
  backdrop-filter: blur(2px);
  opacity: 0;
  transition: opacity .18s ease-out;
}

/* Diálogo */
body[data-theme="modelo"] .sb-modal__dialog {
  position: relative;
  margin: 4vh auto;
  max-width: min(920px, 92vw);
  min-width: min(340px, 92vw);
  background: #f3f5f8;                          /* fondo gris claro */
  border-radius: 16px;                           /* bordes redondeados */
  border: 1px solid rgba(103, 165, 255, .25);    /* borde leve */
  box-shadow:
    0 18px 55px rgba(0,0,0,.25),
    0 0 0 3px rgba(103,165,255,.10),
    0 0 28px rgba(80,145,255,.35);               /* glow azul */
  transform: translateY(12px) scale(.985);
  opacity: 0;
  transition: transform .22s ease, opacity .22s ease;
  color: #1f2937;
}

/* Header del modal */
body[data-theme="modelo"] .sb-modal__head {
  display: flex; align-items: center; gap: 10px;
  padding: 16px 18px 8px;
}
body[data-theme="modelo"] .sb-modal__title {
  margin: 0;
  font-size: clamp(1.1rem, 1.8vw, 1.35rem);
  font-weight: 800;
  color: #2b3a4a;
}

/* Botón cerrar */
body[data-theme="modelo"] .sb-modal__close {
  margin-left: auto;
  display: inline-grid; place-items: center;
  width: 36px; height: 36px; border-radius: 10px;
  border: 1px solid rgba(0,0,0,.06);
  background: #ffffff;
  cursor: pointer;
  font-size: 20px; line-height: 1;
  transition: transform .12s ease, background .12s ease, box-shadow .12s ease;
}
body[data-theme="modelo"] .sb-modal__close:hover {
  background: #eef4ff;
  box-shadow: 0 0 0 2px rgba(103,165,255,.18) inset;
  transform: translateY(-1px);
}

/* Cuerpo con scroll interno si hace falta */
body[data-theme="modelo"] .sb-modal__body {
  padding: 6px 18px 18px;
  max-height: calc(92vh - 60px);
  overflow: auto;
}

/* Estado "abierto" (transiciones) */
body[data-theme="modelo"] .sb-modal.is-open .sb-modal__overlay { opacity: 1; }
body[data-theme="modelo"] .sb-modal.is-open .sb-modal__dialog {
  transform: translateY(0) scale(1);
  opacity: 1;
}

/* Tipografía dentro del modal (admite HTML) */
body[data-theme="modelo"] .sb-modal__body h1,
body[data-theme="modelo"] .sb-modal__body h2,
body[data-theme="modelo"] .sb-modal__body h3 {
  margin: 10px 0 8px;
  color: #203244;
}
body[data-theme="modelo"] .sb-modal__body p { line-height: 1.7; margin: 10px 0; }
body[data-theme="modelo"] .sb-modal__body ul { margin: 8px 0 12px 1.2rem; }
body[data-theme="modelo"] .sb-modal__body li { margin-bottom: 6px; }
body[data-theme="modelo"] .sb-modal__body strong { font-weight: 800; }
body[data-theme="modelo"] .sb-modal__body code,
body[data-theme="modelo"] .sb-modal__body kbd {
  background: #eef2f7; border-radius: 6px; padding: 2px 6px; font-family: ui-monospace, monospace;
}

/* Plantillas ocultas de contenido (no visibles) */
body[data-theme="modelo"] .sb-content-template { display: none !important; }

/* Oculta el primer heading dentro del cuerpo del modal (evita el duplicado) */
body[data-theme="modelo"] .sb-modal__body > h1:first-child,
body[data-theme="modelo"] .sb-modal__body > h2:first-child,
body[data-theme="modelo"] .sb-modal__body > h3:first-child {
  display: none;
}

/* --- Puntos ad-based compactos --- */
body[data-theme="modelo"] .sb-modal__body .sb-adpoints {
  margin: 8px 0 14px 1.1rem;
}
body[data-theme="modelo"] .sb-modal__body .sb-adpoints li {
  margin-bottom: 6px; line-height: 1.55;
}

/* --- 4 niveles: tarjetas sutiles y aire --- */
body[data-theme="modelo"] .sb-modal__body .sb-levels {
  list-style: none; padding: 0; margin: 10px 0 0 0;
  display: grid; gap: 12px;
}
body[data-theme="modelo"] .sb-modal__body .sb-level {
  border: 1px solid rgba(0,0,0,.06);
  background: #ffffff;
  border-radius: 12px;
  padding: 12px 14px;
  box-shadow: 0 6px 16px rgba(0,0,0,.06);
  position: relative;
}
body[data-theme="modelo"] .sb-modal__body .sb-level .lv-title {
  font-weight: 800; margin-bottom: 6px;
}
body[data-theme="modelo"] .sb-modal__body .sb-level p {
  margin: 6px 0 8px; line-height: 1.6;
}
body[data-theme="modelo"] .sb-modal__body .sb-level ul {
  margin: 0 0 0 1.1rem;
}
body[data-theme="modelo"] .sb-modal__body .sb-level ul li {
  margin-bottom: 6px; line-height: 1.55;
}

/* Acento sutil por nivel (borde-izq + halo muy ligero) */
body[data-theme="modelo"] .sb-modal__body .sb-level.lv-parque {
  border-left: 4px solid #5fbf9f;
  box-shadow: 0 6px 16px rgba(95,191,159,.08);
}
body[data-theme="modelo"] .sb-modal__body .sb-level.lv-libreria {
  border-left: 4px solid #6aa8ff;
  box-shadow: 0 6px 16px rgba(106,168,255,.08);
}
body[data-theme="modelo"] .sb-modal__body .sb-level.lv-cafeteria {
  border-left: 4px solid #f2a766;
  box-shadow: 0 6px 16px rgba(242,167,102,.08);
}
body[data-theme="modelo"] .sb-modal__body .sb-level.lv-mesa {
  border-left: 4px solid #b18cff;
  box-shadow: 0 6px 16px rgba(177,140,255,.08);
}

/* --- Lista numerada de las 8 Leyes de Sely (estilo sutil y legible) --- */
body[data-theme="modelo"] .sb-modal__body .sb-ethics {
  list-style: none;
  padding: 0;
  margin: 8px 0 0 0;
  counter-reset: sely;
  display: grid;
  gap: 10px;
}
body[data-theme="modelo"] .sb-modal__body .sb-ethics > li {
  counter-increment: sely;
  position: relative;
  padding: 10px 12px 10px 44px;
  background: #ffffff;
  border: 1px solid rgba(0,0,0,.06);
  border-radius: 10px;
  box-shadow: 0 6px 16px rgba(0,0,0,.06);
  line-height: 1.6;
}
body[data-theme="modelo"] .sb-modal__body .sb-ethics > li::before {
  content: counter(sely);
  position: absolute;
  left: 12px; top: 10px;
  width: 24px; height: 24px;
  display: grid; place-items: center;
  border-radius: 8px;
  background: #eef4ff;
  color: #2a5bd7;
  font-weight: 800;
  font-size: 0.95rem;
  box-shadow: inset 0 0 0 1px rgba(42,91,215,.15);
}

/* SUSCRIPCIONES (estilo sutil dentro del modal) */
body[data-theme="modelo"] .sb-modal__body .sb-subscriptions{
  display:grid; grid-template-columns:repeat(2,minmax(0,1fr));
  gap:12px; margin:8px 0 14px;
}
@media (max-width: 820px){
  body[data-theme="modelo"] .sb-modal__body .sb-subscriptions{ grid-template-columns:1fr; }
}

body[data-theme="modelo"] .sb-modal__body .sb-subcard{
  background:#fff; border:1px solid rgba(0,0,0,.06);
  border-radius:12px; box-shadow:0 6px 16px rgba(0,0,0,.06);
  padding:12px 14px;
}
body[data-theme="modelo"] .sb-modal__body .sb-subcard .plan-title{
  font-weight:800; margin-bottom:6px; display:flex; align-items:center; gap:.45rem;
}
body[data-theme="modelo"] .sb-modal__body .sb-subcard ul{ margin:0 0 0 1.1rem; }
body[data-theme="modelo"] .sb-modal__body .sb-subcard ul li{ margin-bottom:6px; line-height:1.6; }

/* Acentos por plan (borde-izq + halo ligero) */
body[data-theme="modelo"] .sb-modal__body .sb-subcard.plan-basic{
  border-left:4px solid #6aa8ff; box-shadow:0 6px 16px rgba(106,168,255,.08);
}
body[data-theme="modelo"] .sb-modal__body .sb-subcard.plan-premium{
  border-left:4px solid #ffb04a; box-shadow:0 6px 16px rgba(255,176,74,.08);
}
body[data-theme="modelo"] .sb-modal__body .sb-subcard.plan-standard{
  border-left:4px solid #7cc3a7; box-shadow:0 6px 16px rgba(124,195,167,.08);
}
body[data-theme="modelo"] .sb-modal__body .sb-subcard.plan-auth-premium{
  border-left:4px solid #b18cff; box-shadow:0 6px 16px rgba(177,140,255,.08);
}
/* ==========================================================
   MODELO · BMC: 2 columnas solo para los 4 últimos .block
   (Key Resources, Key Partners, Cost Structure, Revenue Streams)
   ========================================================== */
@media (min-width: 900px) {
  /* 1) La página BMC usa .modelo-main: la hacemos grid */
  body[data-theme="modelo"] .modelo-main {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 16px 24px; /* vertical y horizontal */
  }

  /* 2) Por defecto, todos los bloques ocupan el ancho completo */
  body[data-theme="modelo"] .modelo-main > section.block {
    grid-column: 1 / -1;
  }

  /* 3) Los 4 últimos .block van en 2 columnas */
  body[data-theme="modelo"] .modelo-main > section.block:nth-last-of-type(-n + 4) {
    grid-column: auto; /* 1 columna */
  }
}

/* En pantallas pequeñas: 1 columna */
@media (max-width: 899px) {
  body[data-theme="modelo"] .modelo-main {
    display: block; /* layout normal */
  }
}

/* Key Activities: 2 columnas para cada pareja H4+UL (H2 fuera) */
@media (min-width: 900px) {
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid {
    position: relative;
    display: grid;
	align-items: start;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 14px 28px;              /* vertical / horizontal */
    padding: 4px 0;              /* aire para el divisor */
  }
  /* Divisor central sutil */
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid::before {
    content: "";
    position: absolute;
    left: 50%; top: 0; bottom: 0;
    width: 1px;
    background: var(--mn-border, #e5e7eb);
    transform: translateX(-0.5px);
    pointer-events: none;
  }

  /* Columna izquierda/derecha por parejas (requiere patrón H4 seguido de UL) */
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid h4:nth-of-type(odd),
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid h4:nth-of-type(odd) + ul {
    grid-column: 1;
  }
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid h4:nth-of-type(even),
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid h4:nth-of-type(even) + ul {
    grid-column: 2;
  }

  /* Ritmo y legibilidad */
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid h4 { margin: 8px 0 6px; }
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid ul { margin: 0 0 12px 1.15rem; }
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid ul > li { margin-bottom: 6px; line-height: 1.6; }
}

/* Responsive: 1 columna y sin divisor */
@media (max-width: 899px) {
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid { display: block; }
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid::before { display: none; }
}

/* KEY ACTIVITIES: 2 columnas con items alineados arriba */
@media (min-width: 900px) {
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid {
    position: relative;
    display: grid;
    grid-template-columns: repeat(2, minmax(0,1fr));
    gap: 14px 28px;                 /* vertical / horizontal */
    padding: 4px 0;
    align-items: start;             /* <-- alinea ARRIBA las dos columnas */
  }
  /* Divisor sutil al centro */
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid::before {
    content: "";
    position: absolute;
    left: 50%; top: 0; bottom: 0;
    width: 1px;
    background: var(--mn-border, #e5e7eb);
    transform: translateX(-0.5px);
    pointer-events: none;
  }

  /* Cada pareja h4+ul como un item de la grid */
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid .ka-item {
    break-inside: avoid;
  }
  /* Colocación: impares izquierda, pares derecha */
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid .ka-item:nth-of-type(odd)  { grid-column: 1; }
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid .ka-item:nth-of-type(even) { grid-column: 2; }

  /* Ritmo y legibilidad */
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid .ka-item h4 { margin: 8px 0 6px; }
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid .ka-item ul { margin: 0 0 12px 1.15rem; }
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid .ka-item li { margin-bottom: 6px; line-height: 1.6; }
}

/* Responsive: 1 columna y sin divisor */
@media (max-width: 899px) {
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid { display: block; }
  body[data-theme="modelo"] #modelo-negocio .key-activities-grid::before { display: none; }
}

/* (Importante) Si dejaste el CSS anterior que colocaba h4/ul sin wrapper,
   neutralízalo para que no interfiera: */
body[data-theme="modelo"] #modelo-negocio .key-activities-grid h4,
body[data-theme="modelo"] #modelo-negocio .key-activities-grid h4 + ul {
  grid-column: auto !important;
}
/* =========================
   MODELO · Network Effect
   ========================= */

/* 1) Micro-tarjetas en línea */
body[data-theme="modelo"] #modelo-negocio .microcards{
  display:flex; flex-wrap:wrap; gap:10px 12px; margin:8px 0 14px;
}
body[data-theme="modelo"] #modelo-negocio .microcard{
  display:inline-flex; align-items:center;
  padding:.45rem .75rem;
  background:#fff;
  border:1px solid var(--mn-border);
  border-left:4px solid var(--section-accent-color);
  border-radius:10px;
  font-weight:800; color:#2f3b48;
  box-shadow: var(--mn-shadow);
}

/* 2) Fila 1: Estrategia #1 + imagen a la derecha */
body[data-theme="modelo"] #modelo-negocio .network-lead-grid{
  display:grid;
  grid-template-columns: 1fr minmax(320px, 400px);
  gap: 16px 20px;
  align-items: start;
  margin: 10px 0 14px;
}
body[data-theme="modelo"] #modelo-negocio .network-visual{
  margin:0; padding:0;
}
body[data-theme="modelo"] #modelo-negocio .network-visual img{
  width:100%; height:auto; border-radius:10px;
  display:block; border:1px solid var(--mn-border);
  box-shadow: var(--mn-shadow);
}

/* 3) Resto de cajas en 2 columnas */
body[data-theme="modelo"] #modelo-negocio .network-cards{
  display:grid;
  grid-template-columns: repeat(2, minmax(0,1fr));
  gap: 14px 18px;
  align-items:start;
}

/* Responsive: 1 columna */
@media (max-width: 980px){
  body[data-theme="modelo"] #modelo-negocio .network-lead-grid{
    grid-template-columns: 1fr;
  }
  body[data-theme="modelo"] #modelo-negocio .network-cards{
    grid-template-columns: 1fr;
  }
}

/* 4) Blockquote dentro del tema "modelo" */
body[data-theme="modelo"] #modelo-negocio .block blockquote{
  margin:12px 0;
  padding:10px 12px 10px 14px;
  border-left:4px solid var(--section-accent-color);
  background: linear-gradient(180deg,#fff, #b5cbeb);
  border:1px solid var(--mn-border);
  border-left-color: var(--section-accent-color);
  border-radius:10px;
  color:#2f3b48;
  font-style: italic;
  box-shadow: var(--mn-shadow);
      border-left: 4px solid var(--section-accent-color);
	  font-size: 1.2em;
}









